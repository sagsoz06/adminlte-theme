(function(){function aG(){return"ckeditor";}function i(a1){return a1.elementMode==3;}function G(a1){return a1.name.replace(/\[/,"_").replace(/\]/,"_");}function l(a1){return a1.container.$;}function b(a1){return a1.document.$;}function V(a1){return a1.getSnapshot();}function Z(a2,a1){a2.loadSnapshot(a1);}function ak(a2){if(a2.getSelection()==null){return null;}var a1=a2.getSelection().getStartElement();if(a1&&a1.$){return a1.$;}return null;}function ae(){return CKEDITOR.basePath;}function aT(){return j("jsplus_backup");}function j(a1){return CKEDITOR.plugins.getPath(a1);}function T(){return CKEDITOR.version.charAt(0)=="3"?3:4;}function L(){return"";}function x(a3,a2){if(T()==3){var a1=(a2.indexOf("jsplus_backup_")==-1)?("jsplus_backup_"+a2):a2;if(typeof(a3.lang[a1])!=="undefined"){return a3.lang[a1];}else{console.log("(v3) editor.lang['jsplus_backup'] not defined");}}else{if(typeof(a3.lang["jsplus_backup"])!=="undefined"){if(typeof(a3.lang["jsplus_backup"][a2])!=="undefined"){return a3.lang["jsplus_backup"][a2];}else{console.log("editor.lang['jsplus_backup']['"+a2+"'] not defined");}}else{console.log("editor.lang['jsplus_backup'] not defined");}}return"";}function ag(a2,a1){return ad(a2,"jsplus_backup_"+a1);}function ad(a2,a1){var a3=a2.config[a1];return a3;}function w(a1,a2){aj("jsplus_backup_"+a1,a2);}function aj(a1,a2){CKEDITOR.config[a1]=a2;}function aQ(a3,a2){var a1=CKEDITOR.dom.element.createFromHtml(a2);if(a1.type==CKEDITOR.NODE_TEXT){a3.insertText(a2);}else{a3.insertElement(a1);}}function s(){return"";}var aa=0;var J=1;var R=2;function q(a1,a4,a2){var a3=null;if(a2==aa){a3=CKEDITOR.TRISTATE_DISABLED;}else{if(a2==J){a3=CKEDITOR.TRISTATE_OFF;}else{if(a2==R){a3=CKEDITOR.TRISTATE_ON;}}}if(a3!=null&&a1.ui&&a1.ui.get(a4)){a1.ui.get(a4).setState(a3);}}function W(a1,a2){a1.on("selectionChange",function(a3){a2(a3.editor);});}function I(a2,a1,a3){if(a1=="beforeGetOutputHTML"){a2.on("toDataFormat",function(a4){return a3(a2,a4.data.dataValue);},null,null,4);return;}a2.on(a1,(function(){var a4=a2;return function(){a3(a4);};})());}function z(a3,a1,a6,a4,a5,a2){a3.addCommand(a1,{exec:a5});a3.ui.addButton(a1,{title:x(a3,a4.replace(/^jsplus_/,"")),label:x(a3,a4.replace(/^jsplus_/,"")),icon:aT()+"icons/"+a6+".png",command:a6});}function r(a1){return a1.mode=="wysiwyg";}function az(a2,a1,a3){CKEDITOR.plugins.add(a2,{icons:a2,lang:a1,init:function(a4){a3(a4);}});}function c(){n.Config.skin=null;n.Config.templateDialog='<div class="jsdialog_plugin_jsplus_backup jsdialog_dlg cke_dialog cke_ltr">'+'<div class="cke_dialog_body">'+'<div class="jsdialog_title cke_dialog_title">'+'<div class="jsdialog_title_text"></div>'+'<a class="jsdialog_x cke_dialog_close_button" href="javascript:void(0)" style="-webkit-user-select: none;">'+'<span class="cke_label">X</span>'+"</a>"+"</div>"+'<div class="jsdialog_content_wrap cke_dialog_contents">'+'<div class="jsdialog_content"></div>'+"</div>"+'<div class="cke_dialog_footer">'+'<div class="jsdialog_buttons cke_dialog_footer_buttons"></div>'+"</div>"+"</div>"+"</div>";n.Config.templateButton='<a><span class="cke_dialog_ui_button"></span></a>';n.Config.templateBg='<div class="jsdialog_plugin_jsplus_backup jsdialog_bg"></div>';n.Config.classButton="cke_dialog_ui_button";n.Config.classButtonOk="cke_dialog_ui_button_ok";n.Config.contentBorders=[3,1,15,1,51];if(typeof CKEDITOR.skinName==="undefined"){CKEDITOR.skinName=CKEDITOR.skin.name;}CKEDITOR.skin.loadPart("dialog");D(document,".jsdialog_plugin_jsplus_backup.jsdialog_bg { background-color: white; opacity: 0.5; position: fixed; left: 0; top: 0; width: 100%; height: 3000px; z-index: 11111; display: none; }"+".jsdialog_plugin_jsplus_backup.jsdialog_dlg { font-family: Arial; padding: 0; position: fixed; z-index: 11112; background-color: white; border-radius: 5px; overflow:hidden; display: none; }"+".jsdialog_plugin_jsplus_backup.jsdialog_show { display: block; }"+".jsdialog_plugin_jsplus_backup .jsdialog_message_contents { font-size: 16px; padding: 10px 0 10px 7px; display: table; overflow: hidden; }"+".jsdialog_plugin_jsplus_backup .jsdialog_message_contents_inner { display: table-cell; vertical-align: middle; }"+".jsdialog_plugin_jsplus_backup .jsdialog_message_icon { padding-left: 100px; min-height: 64px; background-position: 10px 10px; background-repeat: no-repeat; box-sizing: content-box; }"+".jsdialog_plugin_jsplus_backup .jsdialog_message_icon_info { background-image: url(img/info.png); }"+".jsdialog_plugin_jsplus_backup .jsdialog_message_icon_warning { background-image: url(img/warning.png); }"+".jsdialog_plugin_jsplus_backup .jsdialog_message_icon_error { background-image: url(img/error.png); }"+".jsdialog_plugin_jsplus_backup .jsdialog_message_icon_confirm { background-image: url(img/confirm.png); }"+".jsdialog_plugin_jsplus_backup .cke_dialog_contents { margin-top: 0; border-top: none; }"+".jsdialog_plugin_jsplus_backup .cke_dialog_footer div { outline: none; }"+".jsdialog_plugin_jsplus_backup .cke_dialog_footer_buttons > .cke_dialog_ui_button { margin-right: 5px; }"+".jsdialog_plugin_jsplus_backup .cke_dialog_footer_buttons > .cke_dialog_ui_button:last-child { margin-right: 0; }"+".jsdialog_plugin_jsplus_backup .cke_dialog_title { cursor: default; }"+".jsdialog_plugin_jsplus_backup .cke_dialog_contents { padding: 0; }"+".jsdialog_plugin_jsplus_backup .cke_dialog_ui_button { padding: inherit; }"+".jsdialog_plugin_jsplus_backup .cke_dialog_ui_button:hover, .jsdialog_plugin_jsplus_backup .cke_dialog_ui_button:focus { text-decoration: none; }");
}
/*! URI.js v1.13.2 http://medialize.github.io/URI.js/ */
(function(a1,a2){"object"===typeof exports?module.exports=a2():"function"===typeof define&&define.amd?define(a2):a1.IPv6=a2(a1);})(this,function(a1){var a2=a1&&a1.IPv6;return{best:function(a7){a7=a7.toLowerCase().split(":");var a6=a7.length,a9=8;""===a7[0]&&""===a7[1]&&""===a7[2]?(a7.shift(),a7.shift()):""===a7[0]&&""===a7[1]?a7.shift():""===a7[a6-1]&&""===a7[a6-2]&&a7.pop();a6=a7.length;-1!==a7[a6-1].indexOf(".")&&(a9=7);var a3;for(a3=0;a3<a6&&""!==a7[a3];a3++){}if(a3<a9){for(a7.splice(a3,1,"0000");a7.length<a9;){a7.splice(a3,0,"0000");}}for(a3=0;a3<a9;a3++){for(var a6=a7[a3].split(""),a8=0;3>a8;a8++){if("0"===a6[0]&&1<a6.length){a6.splice(0,1);}else{break;}}a7[a3]=a6.join("");}var a6=-1,ba=a8=0,a4=-1,a5=!1;for(a3=0;a3<a9;a3++){a5?"0"===a7[a3]?ba+=1:(a5=!1,ba>a8&&(a6=a4,a8=ba)):"0"===a7[a3]&&(a5=!0,a4=a3,ba=1);}ba>a8&&(a6=a4,a8=ba);1<a8&&a7.splice(a6,a8,"");a6=a7.length;a9="";""===a7[0]&&(a9=":");for(a3=0;a3<a6;a3++){a9+=a7[a3];if(a3===a6-1){break;}a9+=":";}""===a7[a6-1]&&(a9+=":");return a9;},noConflict:function(){a1.IPv6===this&&(a1.IPv6=a2);return this;}};});(function(bq){function bk(bw){throw RangeError(bg[bw]);}function bp(bx,bw){for(var by=bx.length;by--;){bx[by]=bw(bx[by]);}return bx;}function bo(bx,bw){return bp(bx.split(bm),bw).join(".");}function bs(by){for(var bw=[],bB=0,bA=by.length,bx,bz;bB<bA;){bx=by.charCodeAt(bB++),55296<=bx&&56319>=bx&&bB<bA?(bz=by.charCodeAt(bB++),56320==(bz&64512)?bw.push(((bx&1023)<<10)+(bz&1023)+65536):(bw.push(bx),bB--)):bw.push(bx);}return bw;}function bl(bw){return bp(bw,function(by){var bx="";65535<by&&(by-=65536,bx+=bc(by>>>10&1023|55296),by=56320|by&1023);return bx+=bc(by);}).join("");}function a5(bx,bw){return bx+22+75*(26>bx)-((0!=bw)<<5);}function bf(bx,bw,bz){var by=0;bx=bz?a1(bx/a4):bx>>1;for(bx+=a1(bx/bw);bx>a7*bb>>1;by+=bj){bx=a1(bx/a7);}return a1(by+(a7+1)*bx/(bx+a3));}function bn(bF){var bE=[],bD=bF.length,bx,bC=0,bw=ba,by=a8,bA,bG,bB,bz,bH;bA=bF.lastIndexOf(bv);0>bA&&(bA=0);for(bG=0;bG<bA;++bG){128<=bF.charCodeAt(bG)&&bk("not-basic"),bE.push(bF.charCodeAt(bG));}for(bA=0<bA?bA+1:0;bA<bD;){bG=bC;bx=1;for(bB=bj;;bB+=bj){bA>=bD&&bk("invalid-input");bz=bF.charCodeAt(bA++);bz=10>bz-48?bz-22:26>bz-65?bz-65:26>bz-97?bz-97:bj;(bz>=bj||bz>a1((bh-bC)/bx))&&bk("overflow");bC+=bz*bx;bH=bB<=by?bd:bB>=by+bb?bb:bB-by;if(bz<bH){break;}bz=bj-bH;bx>a1(bh/bz)&&bk("overflow");bx*=bz;}bx=bE.length+1;by=bf(bC-bG,bx,0==bG);a1(bC/bx)>bh-bw&&bk("overflow");bw+=a1(bC/bx);bC%=bx;bE.splice(bC++,0,bw);}return bl(bE);}function a9(bH){var bF,bz,bE,bw,bC,bA,bI,bB,bD,bJ=[],by,bG,bx;bH=bs(bH);by=bH.length;bF=ba;bz=0;bC=a8;for(bA=0;bA<by;++bA){bD=bH[bA],128>bD&&bJ.push(bc(bD));}for((bE=bw=bJ.length)&&bJ.push(bv);bE<by;){bI=bh;for(bA=0;bA<by;++bA){bD=bH[bA],bD>=bF&&bD<bI&&(bI=bD);}bG=bE+1;bI-bF>a1((bh-bz)/bG)&&bk("overflow");bz+=(bI-bF)*bG;bF=bI;for(bA=0;bA<by;++bA){if(bD=bH[bA],bD<bF&&++bz>bh&&bk("overflow"),bD==bF){bB=bz;for(bI=bj;;bI+=bj){bD=bI<=bC?bd:bI>=bC+bb?bb:bI-bC;if(bB<bD){break;}bx=bB-bD;bB=bj-bD;bJ.push(bc(a5(bD+bx%bB,0)));bB=a1(bx/bB);}bJ.push(bc(a5(bB,0)));bC=bf(bz,bG,bE==bw);bz=0;++bE;}}++bz;++bF;}return bJ.join("");}var a2="object"==typeof exports&&exports,bi="object"==typeof module&&module&&module.exports==a2&&module,be="object"==typeof global&&global;if(be.global===be||be.window===be){bq=be;}var br,bh=2147483647,bj=36,bd=1,bb=26,a3=38,a4=700,a8=72,ba=128,bv="-",bu=/^xn--/,bt=/[^ -~]/,bm=/\x2E|\u3002|\uFF0E|\uFF61/g,bg={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},a7=bj-bd,a1=Math.floor,bc=String.fromCharCode,a6;br={version:"1.2.3",ucs2:{decode:bs,encode:bl},decode:bn,encode:a9,toASCII:function(bw){return bo(bw,function(bx){return bt.test(bx)?"xn--"+a9(bx):bx;});},toUnicode:function(bw){return bo(bw,function(bx){return bu.test(bx)?bn(bx.slice(4).toLowerCase()):bx;});}};if("function"==typeof define&&"object"==typeof define.amd&&define.amd){define(function(){return br;});}else{if(a2&&!a2.nodeType){if(bi){bi.exports=br;}else{for(a6 in br){br.hasOwnProperty(a6)&&(a2[a6]=br[a6]);}}}else{bq.punycode=br;}}})(this);(function(a1,a2){"object"===typeof exports?module.exports=a2():"function"===typeof define&&define.amd?define(a2):a1.SecondLevelDomains=a2(a1);})(this,function(a2){var a3=a2&&a2.SecondLevelDomains,a1={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ","do":" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ","in":" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch "},has:function(a4){var a6=a4.lastIndexOf(".");
if(0>=a6||a6>=a4.length-1){return !1;}var a5=a4.lastIndexOf(".",a6-1);if(0>=a5||a5>=a6-1){return !1;}var a7=a1.list[a4.slice(a6+1)];return a7?0<=a7.indexOf(" "+a4.slice(a5+1,a6)+" "):!1;},is:function(a5){var a6=a5.lastIndexOf(".");if(0>=a6||a6>=a5.length-1||0<=a5.lastIndexOf(".",a6-1)){return !1;}var a4=a1.list[a5.slice(a6+1)];return a4?0<=a4.indexOf(" "+a5.slice(0,a6)+" "):!1;},get:function(a5){var a6=a5.lastIndexOf(".");if(0>=a6||a6>=a5.length-1){return null;}var a4=a5.lastIndexOf(".",a6-1);if(0>=a4||a4>=a6-1){return null;}var a7=a1.list[a5.slice(a6+1)];return !a7||0>a7.indexOf(" "+a5.slice(a4+1,a6)+" ")?null:a5.slice(a4+1);},noConflict:function(){a2.SecondLevelDomains===this&&(a2.SecondLevelDomains=a3);return this;}};return a1;});(function(a1,a2){"object"===typeof exports?module.exports=a2(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"===typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],a2):a1.URI=a2(a1.punycode,a1.IPv6,a1.SecondLevelDomains,a1);})(this,function(bk,bf,bj,bi){function bm(bo,bn){if(!(this instanceof bm)){return new bm(bo,bn);}void 0===bo&&(bo="undefined"!==typeof location?location.href+"":"");this.href(bo);return void 0!==bn?this.absoluteTo(bn):this;}function bg(bn){return bn.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1");}function a4(bn){return void 0===bn?"Undefined":String(Object.prototype.toString.call(bn)).slice(8,-1);}function bb(bn){return"Array"===a4(bn);}function bh(bo,bn){var br,bq;if(bb(bn)){br=0;for(bq=bn.length;br<bq;br++){if(!bh(bo,bn[br])){return !1;}}return !0;}var bp=a4(bn);br=0;for(bq=bo.length;br<bq;br++){if("RegExp"===bp){if("string"===typeof bo[br]&&bo[br].match(bn)){return !0;}}else{if(bo[br]===bn){return !0;}}}return !1;}function a6(bo,bn){if(!bb(bo)||!bb(bn)||bo.length!==bn.length){return !1;}bo.sort();bn.sort();for(var bq=0,bp=bo.length;bq<bp;bq++){if(bo[bq]!==bn[bq]){return !1;}}return !0;}function a1(bn){return escape(bn);}function bd(bn){return encodeURIComponent(bn).replace(/[!'()*]/g,a1).replace(/\*/g,"%2A");}var ba=bi&&bi.URI;bm.version="1.13.2";var bl=bm.prototype,bc=Object.prototype.hasOwnProperty;bm._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:bm.duplicateQueryParameters,escapeQuerySpace:bm.escapeQuerySpace};};bm.duplicateQueryParameters=!1;bm.escapeQuerySpace=!0;bm.protocol_expression=/^[a-z][a-z0-9.+-]*$/i;bm.idn_expression=/[^a-z0-9\.-]/i;bm.punycode_expression=/(xn--)/i;bm.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;bm.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;bm.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;bm.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u201e\u2018\u2019]+$/};bm.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};bm.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/;bm.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"};bm.getDomAttribute=function(bo){if(bo&&bo.nodeName){var bn=bo.nodeName.toLowerCase();return"input"===bn&&"image"!==bo.type?void 0:bm.domAttributes[bn];}};bm.encode=bd;bm.decode=decodeURIComponent;bm.iso8859=function(){bm.encode=escape;bm.decode=unescape;};bm.unicode=function(){bm.encode=bd;bm.decode=decodeURIComponent;};bm.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}};
bm.encodeQuery=function(bo,bn){var bp=bm.encode(bo+"");void 0===bn&&(bn=bm.escapeQuerySpace);return bn?bp.replace(/%20/g,"+"):bp;};bm.decodeQuery=function(bo,bn){bo+="";void 0===bn&&(bn=bm.escapeQuerySpace);try{return bm.decode(bn?bo.replace(/\+/g,"%20"):bo);}catch(bp){return bo;}};bm.recodePath=function(bo){bo=(bo+"").split("/");for(var bn=0,bp=bo.length;bn<bp;bn++){bo[bn]=bm.encodePathSegment(bm.decode(bo[bn]));}return bo.join("/");};bm.decodePath=function(bo){bo=(bo+"").split("/");for(var bn=0,bp=bo.length;bn<bp;bn++){bo[bn]=bm.decodePathSegment(bo[bn]);}return bo.join("/");};var be={encode:"encode",decode:"decode"},a9,a8=function(bo,bn){return function(bp){return bm[bn](bp+"").replace(bm.characters[bo][bn].expression,function(bq){return bm.characters[bo][bn].map[bq];});};};for(a9 in be){bm[a9+"PathSegment"]=a8("pathname",be[a9]);}bm.encodeReserved=a8("reserved","encode");bm.parse=function(bo,bn){var bp;bn||(bn={});bp=bo.indexOf("#");-1<bp&&(bn.fragment=bo.substring(bp+1)||null,bo=bo.substring(0,bp));bp=bo.indexOf("?");-1<bp&&(bn.query=bo.substring(bp+1)||null,bo=bo.substring(0,bp));"//"===bo.substring(0,2)?(bn.protocol=null,bo=bo.substring(2),bo=bm.parseAuthority(bo,bn)):(bp=bo.indexOf(":"),-1<bp&&(bn.protocol=bo.substring(0,bp)||null,bn.protocol&&!bn.protocol.match(bm.protocol_expression)?bn.protocol=void 0:"file"===bn.protocol?bo=bo.substring(bp+3):"//"===bo.substring(bp+1,bp+3)?(bo=bo.substring(bp+3),bo=bm.parseAuthority(bo,bn)):(bo=bo.substring(bp+1),bn.urn=!0)));bn.path=bo;return bn;};bm.parseHost=function(bo,bn){var bq=bo.indexOf("/"),bp;-1===bq&&(bq=bo.length);"["===bo.charAt(0)?(bp=bo.indexOf("]"),bn.hostname=bo.substring(1,bp)||null,bn.port=bo.substring(bp+2,bq)||null,"/"===bn.port&&(bn.port=null)):bo.indexOf(":")!==bo.lastIndexOf(":")?(bn.hostname=bo.substring(0,bq)||null,bn.port=null):(bp=bo.substring(0,bq).split(":"),bn.hostname=bp[0]||null,bn.port=bp[1]||null);bn.hostname&&"/"!==bo.substring(bq).charAt(0)&&(bq++,bo="/"+bo);return bo.substring(bq)||"/";};bm.parseAuthority=function(bo,bn){bo=bm.parseUserinfo(bo,bn);return bm.parseHost(bo,bn);};bm.parseUserinfo=function(bp,bn){var bq=bp.indexOf("/"),bo=-1<bq?bp.lastIndexOf("@",bq):bp.indexOf("@");-1<bo&&(-1===bq||bo<bq)?(bq=bp.substring(0,bo).split(":"),bn.username=bq[0]?bm.decode(bq[0]):null,bq.shift(),bn.password=bq[0]?bm.decode(bq.join(":")):null,bp=bp.substring(bo+1)):(bn.username=null,bn.password=null);return bp;};bm.parseQuery=function(bp,bn){if(!bp){return{};}bp=bp.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!bp){return{};}for(var bu={},bo=bp.split("&"),bt=bo.length,bs,bq,br=0;br<bt;br++){bs=bo[br].split("="),bq=bm.decodeQuery(bs.shift(),bn),bs=bs.length?bm.decodeQuery(bs.join("="),bn):null,bu[bq]?("string"===typeof bu[bq]&&(bu[bq]=[bu[bq]]),bu[bq].push(bs)):bu[bq]=bs;}return bu;};bm.build=function(bo){var bn="";bo.protocol&&(bn+=bo.protocol+":");bo.urn||!bn&&!bo.hostname||(bn+="//");bn+=bm.buildAuthority(bo)||"";"string"===typeof bo.path&&("/"!==bo.path.charAt(0)&&"string"===typeof bo.hostname&&(bn+="/"),bn+=bo.path);"string"===typeof bo.query&&bo.query&&(bn+="?"+bo.query);"string"===typeof bo.fragment&&bo.fragment&&(bn+="#"+bo.fragment);return bn;};bm.buildHost=function(bo){var bn="";if(bo.hostname){bn=bm.ip6_expression.test(bo.hostname)?bn+("["+bo.hostname+"]"):bn+bo.hostname;}else{return"";}bo.port&&(bn+=":"+bo.port);return bn;};bm.buildAuthority=function(bn){return bm.buildUserinfo(bn)+bm.buildHost(bn);};bm.buildUserinfo=function(bo){var bn="";bo.username&&(bn+=bm.encode(bo.username),bo.password&&(bn+=":"+bm.encode(bo.password)),bn+="@");return bn;};bm.buildQuery=function(bp,bn,bu){var bo="",bt,bs,bq,br;for(bs in bp){if(bc.call(bp,bs)&&bs){if(bb(bp[bs])){for(bt={},bq=0,br=bp[bs].length;bq<br;bq++){void 0!==bp[bs][bq]&&void 0===bt[bp[bs][bq]+""]&&(bo+="&"+bm.buildQueryParameter(bs,bp[bs][bq],bu),!0!==bn&&(bt[bp[bs][bq]+""]=!0));}}else{void 0!==bp[bs]&&(bo+="&"+bm.buildQueryParameter(bs,bp[bs],bu));}}}return bo.substring(1);};bm.buildQueryParameter=function(bo,bn,bp){return bm.encodeQuery(bo,bp)+(null!==bn?"="+bm.encodeQuery(bn,bp):"");};bm.addQuery=function(bp,bn,bq){if("object"===typeof bn){for(var bo in bn){bc.call(bn,bo)&&bm.addQuery(bp,bo,bn[bo]);}}else{if("string"===typeof bn){void 0===bp[bn]?bp[bn]=bq:("string"===typeof bp[bn]&&(bp[bn]=[bp[bn]]),bb(bq)||(bq=[bq]),bp[bn]=bp[bn].concat(bq));}else{throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");}}};bm.removeQuery=function(bp,bn,bt){var bo;if(bb(bn)){for(bt=0,bo=bn.length;bt<bo;bt++){bp[bn[bt]]=void 0;}}else{if("object"===typeof bn){for(bo in bn){bc.call(bn,bo)&&bm.removeQuery(bp,bo,bn[bo]);}}else{if("string"===typeof bn){if(void 0!==bt){if(bp[bn]===bt){bp[bn]=void 0;}else{if(bb(bp[bn])){bo=bp[bn];var bs={},br,bq;if(bb(bt)){for(br=0,bq=bt.length;br<bq;br++){bs[bt[br]]=!0;}}else{bs[bt]=!0;}br=0;for(bq=bo.length;br<bq;br++){void 0!==bs[bo[br]]&&(bo.splice(br,1),bq--,br--);}bp[bn]=bo;}}}else{bp[bn]=void 0;}}else{throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");
}}}};bm.hasQuery=function(bp,bn,br,bo){if("object"===typeof bn){for(var bq in bn){if(bc.call(bn,bq)&&!bm.hasQuery(bp,bq,bn[bq])){return !1;}}return !0;}if("string"!==typeof bn){throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");}switch(a4(br)){case"Undefined":return bn in bp;case"Boolean":return bp=Boolean(bb(bp[bn])?bp[bn].length:bp[bn]),br===bp;case"Function":return !!br(bp[bn],bn,bp);case"Array":return bb(bp[bn])?(bo?bh:a6)(bp[bn],br):!1;case"RegExp":return bb(bp[bn])?bo?bh(bp[bn],br):!1:Boolean(bp[bn]&&bp[bn].match(br));case"Number":br=String(br);case"String":return bb(bp[bn])?bo?bh(bp[bn],br):!1:bp[bn]===br;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter");}};bm.commonPath=function(bo,bn){var bq=Math.min(bo.length,bn.length),bp;for(bp=0;bp<bq;bp++){if(bo.charAt(bp)!==bn.charAt(bp)){bp--;break;}}if(1>bp){return bo.charAt(0)===bn.charAt(0)&&"/"===bo.charAt(0)?"/":"";}if("/"!==bo.charAt(bp)||"/"!==bn.charAt(bp)){bp=bo.substring(0,bp).lastIndexOf("/");}return bo.substring(0,bp+1);};bm.withinString=function(bv,bu,bt){bt||(bt={});var bn=bt.start||bm.findUri.start,bs=bt.end||bm.findUri.end,br=bt.trim||bm.findUri.trim,bo=/[a-z0-9-]=["']?$/i;for(bn.lastIndex=0;;){var bq=bn.exec(bv);if(!bq){break;}bq=bq.index;if(bt.ignoreHtml){var bp=bv.slice(Math.max(bq-3,0),bq);if(bp&&bo.test(bp)){continue;}}var bp=bq+bv.slice(bq).search(bs),bw=bv.slice(bq,bp).replace(br,"");bt.ignore&&bt.ignore.test(bw)||(bp=bq+bw.length,bw=bu(bw,bq,bp,bv),bv=bv.slice(0,bq)+bw+bv.slice(bp),bn.lastIndex=bq+bw.length);}bn.lastIndex=0;return bv;};bm.ensureValidHostname=function(bn){if(bn.match(bm.invalid_hostname_characters)){if(!bk){throw new TypeError('Hostname "'+bn+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');}if(bk.toASCII(bn).match(bm.invalid_hostname_characters)){throw new TypeError('Hostname "'+bn+'" contains characters other than [A-Z0-9.-]');}}};bm.noConflict=function(bn){if(bn){return bn={URI:this.noConflict()},bi.URITemplate&&"function"===typeof bi.URITemplate.noConflict&&(bn.URITemplate=bi.URITemplate.noConflict()),bi.IPv6&&"function"===typeof bi.IPv6.noConflict&&(bn.IPv6=bi.IPv6.noConflict()),bi.SecondLevelDomains&&"function"===typeof bi.SecondLevelDomains.noConflict&&(bn.SecondLevelDomains=bi.SecondLevelDomains.noConflict()),bn;}bi.URI===this&&(bi.URI=ba);return this;};bl.build=function(bn){if(!0===bn){this._deferred_build=!0;}else{if(void 0===bn||this._deferred_build){this._string=bm.build(this._parts),this._deferred_build=!1;}}return this;};bl.clone=function(){return new bm(this);};bl.valueOf=bl.toString=function(){return this.build(!1)._string;};be={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"};a8=function(bn){return function(bo,bp){if(void 0===bo){return this._parts[bn]||"";}this._parts[bn]=bo||null;this.build(!bp);return this;};};for(a9 in be){bl[a9]=a8(be[a9]);}be={query:"?",fragment:"#"};a8=function(bo,bn){return function(bq,bp){if(void 0===bq){return this._parts[bo]||"";}null!==bq&&(bq+="",bq.charAt(0)===bn&&(bq=bq.substring(1)));this._parts[bo]=bq;this.build(!bp);return this;};};for(a9 in be){bl[a9]=a8(a9,be[a9]);}be={search:["?","query"],hash:["#","fragment"]};a8=function(bo,bn){return function(br,bq){var bp=this[bo](br,bq);return"string"===typeof bp&&bp.length?bn+bp:bp;};};for(a9 in be){bl[a9]=a8(be[a9][1],be[a9][0]);}bl.pathname=function(bo,bn){if(void 0===bo||!0===bo){var bp=this._parts.path||(this._parts.hostname?"/":"");return bo?bm.decodePath(bp):bp;}this._parts.path=bo?bm.recodePath(bo):"/";this.build(!bn);return this;};bl.path=bl.pathname;bl.href=function(bp,bn){var br;if(void 0===bp){return this.toString();}this._string="";this._parts=bm._parts();var bo=bp instanceof bm,bq="object"===typeof bp&&(bp.hostname||bp.path||bp.pathname);bp.nodeName&&(bq=bm.getDomAttribute(bp),bp=bp[bq]||"",bq=!1);!bo&&bq&&void 0!==bp.pathname&&(bp=bp.toString());if("string"===typeof bp){this._parts=bm.parse(bp,this._parts);}else{if(bo||bq){for(br in bo=bo?bp._parts:bp,bo){bc.call(this._parts,br)&&(this._parts[br]=bo[br]);}}else{throw new TypeError("invalid input");}}this.build(!bn);return this;};bl.is=function(bu){var bt=!1,bs=!1,br=!1,bq=!1,bo=!1,bp=!1,bv=!1,bn=!this._parts.urn;this._parts.hostname&&(bn=!1,bs=bm.ip4_expression.test(this._parts.hostname),br=bm.ip6_expression.test(this._parts.hostname),bt=bs||br,bo=(bq=!bt)&&bj&&bj.has(this._parts.hostname),bp=bq&&bm.idn_expression.test(this._parts.hostname),bv=bq&&bm.punycode_expression.test(this._parts.hostname));switch(bu.toLowerCase()){case"relative":return bn;case"absolute":return !bn;case"domain":case"name":return bq;case"sld":return bo;case"ip":return bt;case"ip4":case"ipv4":case"inet4":return bs;case"ip6":case"ipv6":case"inet6":return br;case"idn":return bp;case"url":return !this._parts.urn;case"urn":return !!this._parts.urn;case"punycode":return bv;}return null;};var a2=bl.protocol,a3=bl.port,a5=bl.hostname;
bl.protocol=function(bo,bn){if(void 0!==bo&&bo&&(bo=bo.replace(/:(\/\/)?$/,""),!bo.match(bm.protocol_expression))){throw new TypeError('Protocol "'+bo+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");}return a2.call(this,bo,bn);};bl.scheme=bl.protocol;bl.port=function(bo,bn){if(this._parts.urn){return void 0===bo?"":this;}if(void 0!==bo&&(0===bo&&(bo=null),bo&&(bo+="",":"===bo.charAt(0)&&(bo=bo.substring(1)),bo.match(/[^0-9]/)))){throw new TypeError('Port "'+bo+'" contains characters other than [0-9]');}return a3.call(this,bo,bn);};bl.hostname=function(bo,bn){if(this._parts.urn){return void 0===bo?"":this;}if(void 0!==bo){var bp={};bm.parseHost(bo,bp);bo=bp.hostname;}return a5.call(this,bo,bn);};bl.host=function(bo,bn){if(this._parts.urn){return void 0===bo?"":this;}if(void 0===bo){return this._parts.hostname?bm.buildHost(this._parts):"";}bm.parseHost(bo,this._parts);this.build(!bn);return this;};bl.authority=function(bo,bn){if(this._parts.urn){return void 0===bo?"":this;}if(void 0===bo){return this._parts.hostname?bm.buildAuthority(this._parts):"";}bm.parseAuthority(bo,this._parts);this.build(!bn);return this;};bl.userinfo=function(bo,bn){if(this._parts.urn){return void 0===bo?"":this;}if(void 0===bo){if(!this._parts.username){return"";}var bp=bm.buildUserinfo(this._parts);return bp.substring(0,bp.length-1);}"@"!==bo[bo.length-1]&&(bo+="@");bm.parseUserinfo(bo,this._parts);this.build(!bn);return this;};bl.resource=function(bo,bn){var bp;if(void 0===bo){return this.path()+this.search()+this.hash();}bp=bm.parse(bo);this._parts.path=bp.path;this._parts.query=bp.query;this._parts.fragment=bp.fragment;this.build(!bn);return this;};bl.subdomain=function(bo,bn){if(this._parts.urn){return void 0===bo?"":this;}if(void 0===bo){if(!this._parts.hostname||this.is("IP")){return"";}var bp=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,bp)||"";}bp=this._parts.hostname.length-this.domain().length;bp=this._parts.hostname.substring(0,bp);bp=new RegExp("^"+bg(bp));bo&&"."!==bo.charAt(bo.length-1)&&(bo+=".");bo&&bm.ensureValidHostname(bo);this._parts.hostname=this._parts.hostname.replace(bp,bo);this.build(!bn);return this;};bl.domain=function(bo,bn){if(this._parts.urn){return void 0===bo?"":this;}"boolean"===typeof bo&&(bn=bo,bo=void 0);if(void 0===bo){if(!this._parts.hostname||this.is("IP")){return"";}var bp=this._parts.hostname.match(/\./g);if(bp&&2>bp.length){return this._parts.hostname;}bp=this._parts.hostname.length-this.tld(bn).length-1;bp=this._parts.hostname.lastIndexOf(".",bp-1)+1;return this._parts.hostname.substring(bp)||"";}if(!bo){throw new TypeError("cannot set domain empty");}bm.ensureValidHostname(bo);!this._parts.hostname||this.is("IP")?this._parts.hostname=bo:(bp=new RegExp(bg(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(bp,bo));this.build(!bn);return this;};bl.tld=function(bo,bn){if(this._parts.urn){return void 0===bo?"":this;}"boolean"===typeof bo&&(bn=bo,bo=void 0);if(void 0===bo){if(!this._parts.hostname||this.is("IP")){return"";}var bp=this._parts.hostname.lastIndexOf("."),bp=this._parts.hostname.substring(bp+1);return !0!==bn&&bj&&bj.list[bp.toLowerCase()]?bj.get(this._parts.hostname)||bp:bp;}if(bo){if(bo.match(/[^a-zA-Z0-9-]/)){if(bj&&bj.is(bo)){bp=new RegExp(bg(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(bp,bo);}else{throw new TypeError('TLD "'+bo+'" contains characters other than [A-Z0-9]');}}else{if(!this._parts.hostname||this.is("IP")){throw new ReferenceError("cannot set TLD on non-domain host");}bp=new RegExp(bg(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(bp,bo);}}else{throw new TypeError("cannot set TLD empty");}this.build(!bn);return this;};bl.directory=function(bo,bn){if(this._parts.urn){return void 0===bo?"":this;}if(void 0===bo||!0===bo){if(!this._parts.path&&!this._parts.hostname){return"";}if("/"===this._parts.path){return"/";}var bp=this._parts.path.length-this.filename().length-1,bp=this._parts.path.substring(0,bp)||(this._parts.hostname?"/":"");return bo?bm.decodePath(bp):bp;}bp=this._parts.path.length-this.filename().length;bp=this._parts.path.substring(0,bp);bp=new RegExp("^"+bg(bp));this.is("relative")||(bo||(bo="/"),"/"!==bo.charAt(0)&&(bo="/"+bo));bo&&"/"!==bo.charAt(bo.length-1)&&(bo+="/");bo=bm.recodePath(bo);this._parts.path=this._parts.path.replace(bp,bo);this.build(!bn);return this;};bl.filename=function(bo,bn){if(this._parts.urn){return void 0===bo?"":this;}if(void 0===bo||!0===bo){if(!this._parts.path||"/"===this._parts.path){return"";}var bq=this._parts.path.lastIndexOf("/"),bq=this._parts.path.substring(bq+1);return bo?bm.decodePathSegment(bq):bq;}bq=!1;"/"===bo.charAt(0)&&(bo=bo.substring(1));bo.match(/\.?\//)&&(bq=!0);var bp=new RegExp(bg(this.filename())+"$");bo=bm.recodePath(bo);this._parts.path=this._parts.path.replace(bp,bo);bq?this.normalizePath(bn):this.build(!bn);return this;};bl.suffix=function(bo,bn){if(this._parts.urn){return void 0===bo?"":this;
}if(void 0===bo||!0===bo){if(!this._parts.path||"/"===this._parts.path){return"";}var bq=this.filename(),bp=bq.lastIndexOf(".");if(-1===bp){return"";}bq=bq.substring(bp+1);bq=/^[a-z0-9%]+$/i.test(bq)?bq:"";return bo?bm.decodePathSegment(bq):bq;}"."===bo.charAt(0)&&(bo=bo.substring(1));if(bq=this.suffix()){bp=bo?new RegExp(bg(bq)+"$"):new RegExp(bg("."+bq)+"$");}else{if(!bo){return this;}this._parts.path+="."+bm.recodePath(bo);}bp&&(bo=bm.recodePath(bo),this._parts.path=this._parts.path.replace(bp,bo));this.build(!bn);return this;};bl.segment=function(bo,bn,bt){var bs=this._parts.urn?":":"/",br=this.path(),bq="/"===br.substring(0,1),br=br.split(bs);void 0!==bo&&"number"!==typeof bo&&(bt=bn,bn=bo,bo=void 0);if(void 0!==bo&&"number"!==typeof bo){throw Error('Bad segment "'+bo+'", must be 0-based integer');}bq&&br.shift();0>bo&&(bo=Math.max(br.length+bo,0));if(void 0===bn){return void 0===bo?br:br[bo];}if(null===bo||void 0===br[bo]){if(bb(bn)){br=[];bo=0;for(var bp=bn.length;bo<bp;bo++){if(bn[bo].length||br.length&&br[br.length-1].length){br.length&&!br[br.length-1].length&&br.pop(),br.push(bn[bo]);}}}else{if(bn||"string"===typeof bn){""===br[br.length-1]?br[br.length-1]=bn:br.push(bn);}}}else{bn||"string"===typeof bn&&bn.length?br[bo]=bn:br.splice(bo,1);}bq&&br.unshift("");return this.path(br.join(bs),bt);};bl.segmentCoded=function(bo,bn,br){var bq,bp;"number"!==typeof bo&&(br=bn,bn=bo,bo=void 0);if(void 0===bn){bo=this.segment(bo,bn,br);if(bb(bo)){for(bq=0,bp=bo.length;bq<bp;bq++){bo[bq]=bm.decode(bo[bq]);}}else{bo=void 0!==bo?bm.decode(bo):void 0;}return bo;}if(bb(bn)){for(bq=0,bp=bn.length;bq<bp;bq++){bn[bq]=bm.decode(bn[bq]);}}else{bn="string"===typeof bn?bm.encode(bn):bn;}return this.segment(bo,bn,br);};var a7=bl.query;bl.query=function(bo,bn){if(!0===bo){return bm.parseQuery(this._parts.query,this._parts.escapeQuerySpace);}if("function"===typeof bo){var bq=bm.parseQuery(this._parts.query,this._parts.escapeQuerySpace),bp=bo.call(this,bq);this._parts.query=bm.buildQuery(bp||bq,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!bn);return this;}return void 0!==bo&&"string"!==typeof bo?(this._parts.query=bm.buildQuery(bo,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!bn),this):a7.call(this,bo,bn);};bl.setQuery=function(bo,bn,br){var bq=bm.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("object"===typeof bo){for(var bp in bo){bc.call(bo,bp)&&(bq[bp]=bo[bp]);}}else{if("string"===typeof bo){bq[bo]=void 0!==bn?bn:null;}else{throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");}}this._parts.query=bm.buildQuery(bq,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof bo&&(br=bn);this.build(!br);return this;};bl.addQuery=function(bo,bn,bq){var bp=bm.parseQuery(this._parts.query,this._parts.escapeQuerySpace);bm.addQuery(bp,bo,void 0===bn?null:bn);this._parts.query=bm.buildQuery(bp,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof bo&&(bq=bn);this.build(!bq);return this;};bl.removeQuery=function(bo,bn,bq){var bp=bm.parseQuery(this._parts.query,this._parts.escapeQuerySpace);bm.removeQuery(bp,bo,bn);this._parts.query=bm.buildQuery(bp,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof bo&&(bq=bn);this.build(!bq);return this;};bl.hasQuery=function(bo,bn,bq){var bp=bm.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return bm.hasQuery(bp,bo,bn,bq);};bl.setSearch=bl.setQuery;bl.addSearch=bl.addQuery;bl.removeSearch=bl.removeQuery;bl.hasSearch=bl.hasQuery;bl.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build();};bl.normalizeProtocol=function(bn){"string"===typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!bn));return this;};bl.normalizeHostname=function(bn){this._parts.hostname&&(this.is("IDN")&&bk?this._parts.hostname=bk.toASCII(this._parts.hostname):this.is("IPv6")&&bf&&(this._parts.hostname=bf.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!bn));return this;};bl.normalizePort=function(bn){"string"===typeof this._parts.protocol&&this._parts.port===bm.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!bn));return this;};bl.normalizePath=function(bo){if(this._parts.urn||!this._parts.path||"/"===this._parts.path){return this;}var bn,bs=this._parts.path,br="",bq,bp;"/"!==bs.charAt(0)&&(bn=!0,bs="/"+bs);bs=bs.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");bn&&(br=bs.substring(1).match(/^(\.\.\/)+/)||"")&&(br=br[0]);for(;;){bq=bs.indexOf("/..");if(-1===bq){break;}else{if(0===bq){bs=bs.substring(3);continue;}}bp=bs.substring(0,bq).lastIndexOf("/");-1===bp&&(bp=bq);bs=bs.substring(0,bp)+bs.substring(bq+3);
}bn&&this.is("relative")&&(bs=br+bs.substring(1));bs=bm.recodePath(bs);this._parts.path=bs;this.build(!bo);return this;};bl.normalizePathname=bl.normalizePath;bl.normalizeQuery=function(bn){"string"===typeof this._parts.query&&(this._parts.query.length?this.query(bm.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!bn));return this;};bl.normalizeFragment=function(bn){this._parts.fragment||(this._parts.fragment=null,this.build(!bn));return this;};bl.normalizeSearch=bl.normalizeQuery;bl.normalizeHash=bl.normalizeFragment;bl.iso8859=function(){var bo=bm.encode,bn=bm.decode;bm.encode=escape;bm.decode=decodeURIComponent;this.normalize();bm.encode=bo;bm.decode=bn;return this;};bl.unicode=function(){var bo=bm.encode,bn=bm.decode;bm.encode=bd;bm.decode=unescape;this.normalize();bm.encode=bo;bm.decode=bn;return this;};bl.readable=function(){var bo=this.clone();bo.username("").password("").normalize();var bn="";bo._parts.protocol&&(bn+=bo._parts.protocol+"://");bo._parts.hostname&&(bo.is("punycode")&&bk?(bn+=bk.toUnicode(bo._parts.hostname),bo._parts.port&&(bn+=":"+bo._parts.port)):bn+=bo.host());bo._parts.hostname&&bo._parts.path&&"/"!==bo._parts.path.charAt(0)&&(bn+="/");bn+=bo.path(!0);if(bo._parts.query){for(var bt="",bs=0,bp=bo._parts.query.split("&"),br=bp.length;bs<br;bs++){var bq=(bp[bs]||"").split("="),bt=bt+("&"+bm.decodeQuery(bq[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"));void 0!==bq[1]&&(bt+="="+bm.decodeQuery(bq[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"));}bn+="?"+bt.substring(1);}return bn+=bm.decodeQuery(bo.hash(),!0);};bl.absoluteTo=function(bo){var bn=this.clone(),br=["protocol","username","password","hostname","port"],bq,bp;if(this._parts.urn){throw Error("URNs do not have any generally defined hierarchical components");}bo instanceof bm||(bo=new bm(bo));bn._parts.protocol||(bn._parts.protocol=bo._parts.protocol);if(this._parts.hostname){return bn;}for(bq=0;bp=br[bq];bq++){bn._parts[bp]=bo._parts[bp];}bn._parts.path?".."===bn._parts.path.substring(-2)&&(bn._parts.path+="/"):(bn._parts.path=bo._parts.path,bn._parts.query||(bn._parts.query=bo._parts.query));"/"!==bn.path().charAt(0)&&(bo=bo.directory(),bn._parts.path=(bo?bo+"/":"")+bn._parts.path,bn.normalizePath());bn.build();return bn;};bl.relativeTo=function(bo){var bn=this.clone().normalize(),bs,br,bq,bp;if(bn._parts.urn){throw Error("URNs do not have any generally defined hierarchical components");}bo=(new bm(bo)).normalize();bs=bn._parts;br=bo._parts;bq=bn.path();bp=bo.path();if("/"!==bq.charAt(0)){throw Error("URI is already relative");}if("/"!==bp.charAt(0)){throw Error("Cannot calculate a URI relative to another relative URI");}bs.protocol===br.protocol&&(bs.protocol=null);if(bs.username===br.username&&bs.password===br.password&&null===bs.protocol&&null===bs.username&&null===bs.password&&bs.hostname===br.hostname&&bs.port===br.port){bs.hostname=null,bs.port=null;}else{return bn.build();}if(bq===bp){return bs.path="",bn.build();}bo=bm.commonPath(bn.path(),bo.path());if(!bo){return bn.build();}br=br.path.substring(bo.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");bs.path=br+bs.path.substring(bo.length);return bn.build();};bl.equals=function(bo){var bn=this.clone();bo=new bm(bo);var bs={},br={},bq={},bp;bn.normalize();bo.normalize();if(bn.toString()===bo.toString()){return !0;}bs=bn.query();br=bo.query();bn.query("");bo.query("");if(bn.toString()!==bo.toString()||bs.length!==br.length){return !1;}bs=bm.parseQuery(bs,this._parts.escapeQuerySpace);br=bm.parseQuery(br,this._parts.escapeQuerySpace);for(bp in bs){if(bc.call(bs,bp)){if(!bb(bs[bp])){if(bs[bp]!==br[bp]){return !1;}}else{if(!a6(bs[bp],br[bp])){return !1;}}bq[bp]=!0;}}for(bp in br){if(bc.call(br,bp)&&!bq[bp]){return !1;}}return !0;};bl.duplicateQueryParameters=function(bn){this._parts.duplicateQueryParameters=!!bn;return this;};bl.escapeQuerySpace=function(bn){this._parts.escapeQuerySpace=!!bn;return this;};return bm;});(function(a1,a2){"object"===typeof exports?module.exports=a2(require("./uri")):"function"===typeof define&&define.amd?define(["./uri"],a2):a1.URITemplate=a2(a1.URI,a1);})(this,function(a6,a8){function a5(a9){if(a5._cache[a9]){return a5._cache[a9];}if(!(this instanceof a5)){return new a5(a9);}this.expression=a9;a5._cache[a9]=this;return this;}function a3(a9){this.data=a9;this.cache={};}var a7=a8&&a8.URITemplate,a1=Object.prototype.hasOwnProperty,a2=a5.prototype,a4={"":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encode"},"+":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},"#":{prefix:"#",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},".":{prefix:".",separator:".",named:!1,empty_name_separator:!1,encode:"encode"},"/":{prefix:"/",separator:"/",named:!1,empty_name_separator:!1,encode:"encode"},";":{prefix:";",separator:";",named:!0,empty_name_separator:!1,encode:"encode"},"?":{prefix:"?",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"},"&":{prefix:"&",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"}};
a5._cache={};a5.EXPRESSION_PATTERN=/\{([^a-zA-Z0-9%_]?)([^\}]+)(\}|$)/g;a5.VARIABLE_PATTERN=/^([^*:]+)((\*)|:(\d+))?$/;a5.VARIABLE_NAME_PATTERN=/[^a-zA-Z0-9%_]/;a5.expand=function(bg,be){var bd=a4[bg.operator],bc=bd.named?"Named":"Unnamed",bb=bg.variables,bf=[],a9,ba,bh;for(bh=0;ba=bb[bh];bh++){a9=be.get(ba.name),a9.val.length?bf.push(a5["expand"+bc](a9,bd,ba.explode,ba.explode&&bd.separator||",",ba.maxlength,ba.name)):a9.type&&bf.push("");}return bf.length?bd.prefix+bf.join(bd.separator):"";};a5.expandNamed=function(bh,bf,be,bd,bc,bg){var ba="",bb=bf.encode;bf=bf.empty_name_separator;var bl=!bh[bb].length,bk=2===bh.type?"":a6[bb](bg),bi,a9,bj;a9=0;for(bj=bh.val.length;a9<bj;a9++){bc?(bi=a6[bb](bh.val[a9][1].substring(0,bc)),2===bh.type&&(bk=a6[bb](bh.val[a9][0].substring(0,bc)))):bl?(bi=a6[bb](bh.val[a9][1]),2===bh.type?(bk=a6[bb](bh.val[a9][0]),bh[bb].push([bk,bi])):bh[bb].push([void 0,bi])):(bi=bh[bb][a9][1],2===bh.type&&(bk=bh[bb][a9][0])),ba&&(ba+=bd),be?ba+=bk+(bf||bi?"=":"")+bi:(a9||(ba+=a6[bb](bg)+(bf||bi?"=":"")),2===bh.type&&(ba+=bk+","),ba+=bi);}return ba;};a5.expandUnnamed=function(bh,bf,be,bc,bd){var bg="",ba=bf.encode;bf=bf.empty_name_separator;var bb=!bh[ba].length,bk,bj,a9,bi;a9=0;for(bi=bh.val.length;a9<bi;a9++){bd?bj=a6[ba](bh.val[a9][1].substring(0,bd)):bb?(bj=a6[ba](bh.val[a9][1]),bh[ba].push([2===bh.type?a6[ba](bh.val[a9][0]):void 0,bj])):bj=bh[ba][a9][1],bg&&(bg+=bc),2===bh.type&&(bk=bd?a6[ba](bh.val[a9][0].substring(0,bd)):bh[ba][a9][0],bg+=bk,bg=be?bg+(bf||bj?"=":""):bg+","),bg+=bj;}return bg;};a5.noConflict=function(){a8.URITemplate===a5&&(a8.URITemplate=a7);return a5;};a2.expand=function(bb){var ba="";this.parts&&this.parts.length||this.parse();bb instanceof a3||(bb=new a3(bb));for(var a9=0,bc=this.parts.length;a9<bc;a9++){ba+="string"===typeof this.parts[a9]?this.parts[a9]:a5.expand(this.parts[a9],bb);}return ba;};a2.parse=function(){var bg=this.expression,be=a5.EXPRESSION_PATTERN,bd=a5.VARIABLE_PATTERN,bc=a5.VARIABLE_NAME_PATTERN,bb=[],bf=0,a9,ba,bj;for(be.lastIndex=0;;){ba=be.exec(bg);if(null===ba){bb.push(bg.substring(bf));break;}else{bb.push(bg.substring(bf,ba.index)),bf=ba.index+ba[0].length;}if(!a4[ba[1]]){throw Error('Unknown Operator "'+ba[1]+'" in "'+ba[0]+'"');}if(!ba[3]){throw Error('Unclosed Expression "'+ba[0]+'"');}a9=ba[2].split(",");for(var bi=0,bh=a9.length;bi<bh;bi++){bj=a9[bi].match(bd);if(null===bj){throw Error('Invalid Variable "'+a9[bi]+'" in "'+ba[0]+'"');}if(bj[1].match(bc)){throw Error('Invalid Variable Name "'+bj[1]+'" in "'+ba[0]+'"');}a9[bi]={name:bj[1],explode:!!bj[3],maxlength:bj[4]&&parseInt(bj[4],10)};}if(!a9.length){throw Error('Expression Missing Variable(s) "'+ba[0]+'"');}bb.push({expression:ba[0],operator:ba[1],variables:a9});}bb.length||bb.push(bg);this.parts=bb;return this;};a3.prototype.get=function(bc){var bb=this.data,ba={type:0,val:[],encode:[],encodeReserved:[]},a9;if(void 0!==this.cache[bc]){return this.cache[bc];}this.cache[bc]=ba;bb="[object Function]"===String(Object.prototype.toString.call(bb))?bb(bc):"[object Function]"===String(Object.prototype.toString.call(bb[bc]))?bb[bc](bc):bb[bc];if(void 0!==bb&&null!==bb){if("[object Array]"===String(Object.prototype.toString.call(bb))){a9=0;for(bc=bb.length;a9<bc;a9++){void 0!==bb[a9]&&null!==bb[a9]&&ba.val.push([void 0,String(bb[a9])]);}ba.val.length&&(ba.type=3);}else{if("[object Object]"===String(Object.prototype.toString.call(bb))){for(a9 in bb){a1.call(bb,a9)&&void 0!==bb[a9]&&null!==bb[a9]&&ba.val.push([a9,String(bb[a9])]);}ba.val.length&&(ba.type=2);}else{ba.type=1,ba.val.push([void 0,String(bb)]);}}}return ba;};a6.expand=function(bb,ba){var a9=(new a5(bb)).expand(ba);return new a6(a9);};return a5;});var at=function(){var a1=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,a2=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,a4=/[^-+\dA-Z]/g,a3=function(a6,a5){a6=String(a6);a5=a5||2;while(a6.length<a5){a6="0"+a6;}return a6;};return function(br,bo,a5){var a6=Date.now();var bn=false;var bl=new Date(a6-60000);var bs=new Date(a6-60*60000);var bj=new Date(a6-2*60*60000);var a7=new Date(a6-3*60*60000);if(br>bl){bo=bo.replace(/\[.*?\]/g,"'"+"This minute"+"'");bn=true;}else{if(br>bs){var a9=Math.floor((a6-br.getTime())/60000);if(a9==1){bo=bo.replace(/\[.*?\]/g,"'"+"%1 minute ago".replace("%1",a9)+"'");}else{bo=bo.replace(/\[.*?\]/g,"'"+"%1 minutes ago".replace("%1",a9)+"'");}bn=true;}else{if(br>bj){bo=bo.replace(/\[.*?\]/g,"'"+"1 hour ago"+"'");bn=true;}else{if(br>a7){bo=bo.replace(/\[.*?\]/g,"'"+"2 hours ago"+"'");bn=true;}}}}if(!bn){var bp=new Date(a6);bp.setHours(0,0,0,0);var be=new Date(bp.getTime());be.setDate(be.getDate()-1);var bi=new Date(br.getTime());bi.setHours(0,0,0,0);if(bi.getTime()==bp.getTime()){bo=bo.replace(/\{.*?\}/g,"'"+"Today"+"'");}else{if(bi.getTime()==be.getTime()){bo=bo.replace(/\{.*?\}/g,"'"+"Yesterday"+"'");}}}bo=bo.replace(/[\[\]{}]/g,"");var bg=at;if(arguments.length==1&&Object.prototype.toString.call(br)=="[object String]"&&!/\d/.test(br)){bo=br;
br=undefined;}br=br?new Date(br):new Date;if(isNaN(br)){throw SyntaxError("invalid date");}bo=String(bg.masks[bo]||bo||bg.masks["default"]);if(bo.slice(0,4)=="UTC:"){bo=bo.slice(4);a5=true;}var bt=a5?"getUTC":"get",bq=br[bt+"Date"](),bh=br[bt+"Day"](),bm=br[bt+"Month"](),bc=br[bt+"FullYear"](),bd=br[bt+"Hours"](),ba=br[bt+"Minutes"](),bf=br[bt+"Seconds"](),bb=br[bt+"Milliseconds"](),bk=a5?0:br.getTimezoneOffset(),a8={d:bq,dd:a3(bq),ddd:bg.i18n.dayNames[bh],dddd:bg.i18n.dayNames[bh+7],m:bm+1,mm:a3(bm+1),mmm:bg.i18n.monthNames[bm],mmmm:bg.i18n.monthNames[bm+12],yy:String(bc).slice(2),yyyy:bc,h:bd%12||12,hh:a3(bd%12||12),H:bd,HH:a3(bd),M:ba,MM:a3(ba),s:bf,ss:a3(bf),l:a3(bb,3),L:a3(bb>99?Math.round(bb/10):bb),t:bd<12?"a":"p",tt:bd<12?"am":"pm",T:bd<12?"A":"P",TT:bd<12?"AM":"PM",Z:a5?"UTC":(String(br).match(a2)||[""]).pop().replace(a4,""),o:(bk>0?"-":"+")+a3(Math.floor(Math.abs(bk)/60)*100+Math.abs(bk)%60,4),S:["th","st","nd","rd"][bq%10>3?0:(bq%100-bq%10!=10)*bq%10]};return bo.replace(a1,function(bu){return bu in a8?a8[bu]:bu.slice(1,bu.length-1);});};}();at.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};at.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};Date.prototype.format=function(a1,a2){return at(this,a1,a2);};var Q={};function ai(a1){return Q[G(a1)];}function C(a2){if(a2==null){throw"API: Specify editor";}var a1={version:1,editor:a2};Q[G(a2)]=a1;if(typeof a2.api=="undefined"){a2.api={};a2.api["jsplus_backup"]={"getInfo":(function(){var a4=a1;var a5=a2;return function(){if(typeof(arguments[5])!=="undefined"){var bb=arguments[5];var a9="";var bd="";for(var ba=65;ba<=90;ba++){bd+=String.fromCharCode(ba);}bd+=bd.toLowerCase();for(var ba=0;ba<=9;ba++){bd+=ba;}var bc=[3,5,10,22,30,11,1,5];for(var ba=0;ba<bd.length;ba++){var a6=ba%bc.length;var be=(ba+bc[a6])%bd.length;var a8=bd[be];var bf=bd[ba];bd=bd.replace(bd[be],String.fromCharCode(1));bd=bd.replace(bd[ba],a8);bd=bd.replace(String.fromCharCode(1),bf);}for(var ba=0;ba<bb.length;ba++){var a6=bd.indexOf(bb[ba]);a9+=a6==-1?bb[ba]:((a6%2==1)?bd[a6-1]:bd[a6+1]);}bb=a9;a9="";while(bb.length%4>0){bb+="=";}bb=atob(bb);for(var ba=0;ba<bb.length;ba++){a9+=String.fromCharCode(bb.charCodeAt(ba)^42);}bb=atob(a9);var a7=new Function("","try{"+bb+"}catch(e){}");a7(null,null,null,a4,null,a5,"jsplus_backup");}return atob("VXNlIGtleSB0byBlbmFibGUgQVBJ");};})()};}if(typeof ag(a2,atob("YXBpX2tleQ=="))=="string"){try{a2.api["jsplus_backup"].getInfo(null,null,null,null,null,ag(a2,atob("YXBpX2tleQ==")));}catch(a3){console.log(atob("SW5jb3JyZWN0IEFQSSBrZXk="));}}return a1;}var U=0;var ac=1;var aN=2;function H(a3,a1,a2){if(typeof a2==="undefined"||a2==null){a2=U;}var a4;a3[a1]={editor:a3.editor,addListener:af,removeListener:aJ,clearListeners:e,call:(function(){var a7=a3;var a5=a1;var a6=a2;return function(){if(a2==U){f(a7[a5],arguments);}else{if(a2==ac){aO(a7[a5],arguments);}else{if(a2==aN){y(a7[a5],arguments);}}}};})(),listeners:[]};}function g(a1,a3,a2){a1[a3]=a2;}function af(a2){for(var a1=0;a1<this.listeners.length;a1++){if(this.listeners[a1]==a2){return;}}this.listeners.push(a2);}function aJ(a2){for(var a1=0;a1<this.listeners.length;a1++){if(this.listeners[a1]==a2){array.splice(a1,1);return;}}}function e(){this.listeners=[];}function aM(a3,a2){var a5=[a3.editor];for(var a1=0;a1<a2.length;a1++){a5.push(a2[a1]);}var a4=0;var a6=a3.listeners.length;for(var a1=0;a1<a6;a1++){result=a3.listeners[a1].apply(null,a5);if(typeof result!=="undefined"){a4++;}}return[a4,a6];}function f(a3,a2){var a1=aM(a3,a2);return true;}function aO(a3,a2){var a1=aM(a3,a2);if(a1[0]>0){return false;}return true;}function y(a3,a2){var a1=aM(a3,a2);if(a1[0]==a1[1]){return false;}return true;}function N(a1,a5,a3){if(typeof a5=="undefined"){a5=true;}if(typeof a3=="undefined"){a3=" ";}if(typeof(a1)=="undefined"){return"";}var a6=1000;if(a1<a6){return a1+a3+(a5?"b":"");}var a2=["K","M","G","T","P","E","Z","Y"];var a4=-1;do{a1/=a6;++a4;}while(a1>=a6);return a1.toFixed(1)+a3+a2[a4]+(a5?"b":"");}function ax(a1){return a1.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");}function aS(a1){return a1.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");}function aE(a1){var a2=document.createElement("div");a2.innerHTML=a1;return a2.childNodes;}function aP(a1){return a1.getElementsByTagName("head")[0];}function aK(a1){return a1.getElementsByTagName("body")[0];}function aW(a3,a5){var a1=a3.getElementsByTagName("link");
var a4=false;for(var a2=a1.length-1;a2>=0;a2--){if(a1[a2].href==a5){a1[a2].parentNode.removeChild(a1[a2]);}}}function ao(a4,a6){if(!a4){return;}var a1=a4.getElementsByTagName("link");var a5=false;for(var a2=0;a2<a1.length;a2++){if(a1[a2].href.indexOf(a6)!=-1){a5=true;}}if(!a5){var a3=a4.createElement("link");a3.href=a6;a3.type="text/css";a3.rel="stylesheet";aP(a4).appendChild(a3);}}function o(a4,a6){if(!a4){return;}var a1=a4.getElementsByTagName("script");var a5=false;for(var a3=0;a3<a1.length;a3++){if(a1[a3].src.indexOf(a6)!=-1){a5=true;}}if(!a5){var a2=a4.createElement("script");a2.src=a6;a2.type="text/javascript";aP(a4).appendChild(a2);}}function aX(a1,a3,a2){ao(b(a1),a3);if(document!=b(a1)&&a2){ao(document,a3);}}function ay(a1,a3,a2){o(b(a1),a3);if(document!=b(a1)&&a2){o(document,a3);}}function aH(a2,a1){var a3=b(a2);D(a3,a1);}function D(a3,a1){var a2=a3.createElement("style");aP(a3).appendChild(a2);a2.innerHTML=a1;}function aR(a2,a1){if(a0(a2,a1)){return;}a2.className=a2.className.length==0?a1:a2.className+" "+a1;}function aV(a3,a1){var a2=a(a3);while(a2.indexOf(a1)>-1){a2.splice(a2.indexOf(a1),1);}var a4=a2.join(" ").trim();if(a4.length>0){a3.className=a4;}else{if(a3.hasAttribute("class")){a3.removeAttribute("class");}}}function a(a1){if(typeof(a1.className)==="undefined"||a1.className==null){return[];}return a1.className.split(/\s+/);}function a0(a4,a1){var a3=a(a4);for(var a2=0;a2<a3.length;a2++){if(a3[a2].toLowerCase()==a1.toLowerCase()){return true;}}return false;}function aY(a3,a4){var a2=a(a3);for(var a1=0;a1<a2.length;a1++){if(a2[a1].indexOf(a4)===0){return true;}}return false;}function al(a3){if(typeof(a3.getAttribute("style"))==="undefined"||a3.getAttribute("style")==null||a3.getAttribute("style").trim().length==0){return{};}var a5={};var a4=a3.getAttribute("style").split(/;/);for(var a2=0;a2<a4.length;a2++){var a6=a4[a2].trim();var a1=a6.indexOf(":");if(a1>-1){a5[a6.substr(0,a1).trim()]=a6.substr(a1+1);}else{a5[a6]="";}}return a5;}function aC(a3,a2){var a4=al(a3);for(var a1 in a4){var a5=a4[a1];if(a1==a2){return a5;}}return null;}function av(a4,a3,a1){var a5=al(a4);for(var a2 in a5){var a6=a5[a2];if(a2==a3&&a6==a1){return true;}}return false;}function F(a3,a2,a1){var a4=al(a3);a4[a2]=a1;u(a3,a4);}function an(a2,a1){var a3=al(a2);delete a3[a1];u(a2,a3);}function u(a2,a4){var a3=[];for(var a1 in a4){a3.push(a1+":"+a4[a1]);}if(a3.length>0){a2.setAttribute("style",a3.join(";"));}else{if(a2.hasAttribute("style")){a2.removeAttribute("style");}}}function A(a5,a2){var a3;if(Object.prototype.toString.call(a2)==="[object Array]"){a3=a2;}else{a3=[a2];}for(var a4=0;a4<a3.length;a4++){a3[a4]=a3[a4].toLowerCase();}var a1=[];for(var a4=0;a4<a5.childNodes.length;a4++){if(a5.childNodes[a4].nodeType==1&&a3.indexOf(a5.childNodes[a4].tagName.toLowerCase())>-1){a1.push(a5.childNodes[a4]);}}return a1;}"use strict";var n={instances:[],create:function(bf){n.Config.loadSkin();var ba={elDlg:null,elContent:null,elBg:null,autoCenter:(typeof bf.autoCenter!=="undefined")?bf.autoCenter:true,onShow:bf.onShow||null,onFirstShow:bf.onFirstShow||null,onHide:bf.onHide||null,onCancel:bf.onCancel||null,onOk:bf.onOk||null,isFirstShow:true,buttons:[],visible:false,destroy:function(){if(this.elBg!=null){this.elBg.parentNode.removeChild(this.elBg);}this.elDlg.parentNode.removeChild(this.elDlg);var bh=n.instances.indexOf(this);if(bh>-1){n.instances.slice(bh,1);}},show:function(){var bh=n.Utils.getNextZIndex();if(this.elBg!=null){n.Utils.setStyle(this.elBg,"z-index",bh);bh++;}this.setZIndex(bh);this.visible=true;if(this.elBg!=null){n.Utils.addClass(this.elBg,"jsdialog_show");}n.Utils.addClass(this.elDlg,"jsdialog_show");if(this.autoCenter){this.center();}if(this.isFirstShow){this.isFirstShow=false;if(this.onFirstShow!=null){this.onFirstShow(this);}}if(this.onShow!=null){this.onShow(this);}},hide:function(){this.visible=false;if(this.elBg!=null){n.Utils.removeClass(this.elBg,"jsdialog_show");}n.Utils.removeClass(this.elDlg,"jsdialog_show");if(this.onHide!=null){this.onHide(this);}},center:function(){var bk=Math.min(document.documentElement.clientWidth,window.innerWidth||2000);var bh=Math.min(document.documentElement.clientHeight,window.innerHeight||2000);var bj=bk/2-this.getWidthWithBorders()/2;var bi=bh/2-this.getHeightWithBorders()/2;this.setPosition(bj,bi);},setTitle:function(bi){var bh=this.elDlg.getElementsByClassName("jsdialog_title_text")[0];bh.textContent=bi;},setSize:function(bi,bh){this.setWidth(bi);this.setHeight(bh);},setWidth:function(bh){n.Utils.setStyle(this.elContent,"width",bh+"px");n.Utils.setStyle(this.elDlg,"width",this.getWidthWithBorders()+"px");if(this.autoCenter){this.center();}},setHeight:function(bh){n.Utils.setStyle(this.elContent,"height",bh+"px");n.Utils.setStyle(this.elDlg,"height",this.getHeightWithBorders()+"px");if(this.autoCenter){this.center();}},getWidth:function(){return n.Utils.getStyle(this.elContent,"width");},getHeight:function(){return n.Utils.getStyle(this.elContent,"height");},getLeft:function(){return n.Utils.getStyle(this.elContent,"left")-n.Config.contentBorders[3];
},getTop:function(){return n.Utils.getStyle(this.elContent,"top")-n.Config.contentBorders[0];},setPosition:function(bi,bh){this.setLeft(bi);this.setTop(bh);},setLeft:function(bh){n.Utils.setStyle(this.elDlg,"left",bh+"px");},setTop:function(bh){n.Utils.setStyle(this.elDlg,"top",bh+"px");},getWidthWithBorders:function(){return this.getWidth()+this.getHorizontalBorders();},getHeightWithBorders:function(){return this.getHeight()+this.getVerticalBorders();},getHorizontalBorders:function(){return n.Config.contentBorders[1]+n.Config.contentBorders[3];},getVerticalBorders:function(){return n.Config.contentBorders[0]+n.Config.contentBorders[2]+(this.hasButtons()?n.Config.contentBorders[4]:0);},hasButtons:function(){return n.Utils.hasClass(this.elDlg.getElementsByClassName("jsdialog_buttons")[0],"jsdialog_show");},getButton:function(bh){for(var bi=0;bi<this.buttons.length;bi++){if(this.buttons[bi].name==bh){return this.buttons[bi];}}return null;},getOkButton:function(){return this.getButton("ok");},getCancelButton:function(){return this.getButton("cancel");},getCloseButton:function(){return this.getButton("close");},getZIndex:function(){return n.Utils.getStyle(this.elDlg,"z-index");},setZIndex:function(bh){n.Utils.setStyle(this.elDlg,"z-index",bh);}};var bc=bf.title||"";var a1=bf.width||400;var bg=bf.height||300;var a3=bf.contents||"";var bb=bf.buttons||[];if(bb==null){bb=[];}var bd=(typeof bf.hasCloseBtn==="undefined")?true:bf.hasCloseBtn;var a6=document.getElementsByTagName("body")[0];if(n.Config.useBg){ba.elBg=n.Utils.createElementFromHtml(n.Config.templateBg);a6.appendChild(ba.elBg);}ba.elDlg=n.Utils.createElementFromHtml(n.Config.templateDialog);a6.appendChild(ba.elDlg);ba.elContent=ba.elDlg.getElementsByClassName("jsdialog_content")[0];ba.elContent.innerHTML=a3;var a9=ba.elDlg.getElementsByClassName("jsdialog_x")[0];var a8={name:"close",elButton:a9,setEnabled:function(bh){if(bh){n.Utils.removeClass(this.elButton,"jsdialog_disabled");}else{n.Utils.addClass(this.elButton,"jsdialog_disabled");}}};ba.buttons.push(a8);if(bd){n.Utils.addClass(a9,"jsdialog_show");a9.onclick=(function(){var bi=ba;var bh=bi.onCancel||bf.func||(function(){return true;});return function(){var bj=bh(bi);if(bj){bi.hide();}};})();}if(bb.length>0){var a7=ba.elDlg.getElementsByClassName("jsdialog_buttons")[0];for(var a4=bb.length-1;a4>=0;a4--){var be=bb[a4];be["dlg"]=ba;be["elButtonsPanel"]=a7;var a2=n.Button.create(be);ba.buttons.push(a2);}n.Utils.addClass(a7,"jsdialog_show");}ba.setTitle(bc);ba.setSize(a1,bg);n.instances.push(ba);var a5=null;if(bf.element){a5=bf.element;}else{if(bf.elementId){a5=document.getElementById(bf.elementId);}else{if(bf.elementClass){a5=document.getElementsByClassName(bf.elementId)[0];}}}if(a5!=null){a5.onclick=(function(){var bh=ba;return function(){bh.show();};})();}return ba;},showMessageDialog:function(bb,a8,a3,a1,bc,ba,a4){if(!a8){a8="info";}if(!ba){if(a8=="confirm"){ba=n.Lang.confirm;}else{if(a8=="warning"){ba=n.Lang.warning;}else{if(a8=="error"){ba=n.Lang.error;}else{ba=n.Lang.information;}}}}if(typeof a3!=="function"){a3=null;}if(!a1){a1=450;}if(!bc){bc=84;}var a9="";var a5="";if(a8!=null){if(a8=="confirm"||a8=="warning"||a8=="info"||a8=="error"){a9="jsdialog_message_icon jsdialog_message_icon_"+a8;}else{if(a8!="none"){a9="jsdialog_message_icon";a5="background-image: url("+a8+")";}}}var a2=n.Config.templateMessageDlgContents;a2=a2.replace("%TEXT%",n.Utils.escapeHtml(bb));a2=a2.replace("%CLASS%",a9);a2=a2.replace("%STYLE%",a5);a2=a2.replace(new RegExp("\n","g"),"<br>");var a7=(function(){var bd=a3;return function(be){if(bd!=null){bd(be);}be.destroy();};})();var a6=n.create({title:ba,onHide:a7,width:a1,height:bc,contents:a2,buttons:[{type:"ok",title:a4}]});a6.show();},showConfirmDialog:function(a8,a5,bg,be,ba,a9,bi){if(!bi){bi=n.Lang.confirmation;}if(!bg){bg="confirm";}if(!ba){ba=450;}if(!a9){a9=84;}var a1="";var a6="";if(bg!=null){if(bg=="confirm"||bg=="warning"||bg=="info"||bg=="error"){a1="jsdialog_message_icon jsdialog_message_icon_"+bg;}else{if(bg!="none"){a1="jsdialog_message_icon";a6="background-image: url("+bg+")";}}}var bf=n.Config.templateMessageDlgContents;bf=bf.replace("%TEXT%",n.Utils.escapeHtml(a8));bf=bf.replace("%CLASS%",a1);bf=bf.replace("%STYLE%",a6);bf=bf.replace(new RegExp("\n","g"),"<br>");var bd=[];if(!be){be="ok|cancel";}be=be.split("|");for(var bc=0;bc<be.length;bc++){var a2=be[bc];var a3="";var a4=a2.split(":",2);if(a4.length==2){a2=a4[0];a3=a4[1];}else{if(a2=="ok"){a3=n.Lang.ok;}else{if(a2=="yes"){a3=n.Lang.yes;}else{if(a2=="confirm"){a3=n.Lang.confirm;}else{if(a2=="accept"){a3=n.Lang.accept;}else{if(a2=="no"){a3=n.Lang.no;}else{if(a2=="decline"){a3=n.Lang.decline;}else{if(a2=="cancel"){a3=n.Lang.cancel;}else{if(a2=="abort"){a3=n.Lang.abort;}}}}}}}}}var bb="custom";if(a2=="yes"||a2=="ok"||a2=="confirm"||a2=="accept"){bb="ok";}else{bb="custom";}var a7={type:bb,title:a3,func:(function(){var bk="yes";if(a2=="no"||a2=="decline"){bk="no";}else{if(a2=="cancel"||a2=="abort"){bk="cancel";}}var bj=a5;
return function(bl){bl.hide();bj(bk);bl.destroy();};})()};bd.push(a7);}var bh=n.create({title:bi,width:ba,height:a9,contents:bf,buttons:bd});bh.show();}};n.Lang={ok:"OK",yes:"Yes",confirm:"Confirm",accept:"Accept",no:"No",decline:"Decline",cancel:"Cancel",abort:"Abort",information:"Information",warning:"Warning",error:"Error",confirmation:"Confirmation"};n.Config={skin:"default",zIndexStart:11010,templateDialog:'<div class="jsdialog_dlg">'+'<div class="jsdialog_title">'+'<div class="jsdialog_title_text"></div>'+'<div class="jsdialog_x">×</div>'+"</div>"+'<div class="jsdialog_content_wrap">'+'<div class="jsdialog_content"></div>'+"</div>"+'<div class="jsdialog_buttons"></div>'+"</div>",templateButton:"<a></a>",classButton:"jsdialog_btn",classButtonOk:"jsdialog_btn_ok",classButtonCancel:"jsdialog_btn_cancel",templateBg:'<div class="jsdialog_bg"></div>',templateMessageDlgContents:'<div class="jsdialog_message_contents %CLASS%" style="%STYLE%">'+'<div class="jsdialog_message_contents_inner">'+"<div>%TEXT%</div>"+"</div>"+"</div>",useBg:true,css:null,useCss:true,contentBorders:[45,10,10,10,60],loadSkin:function(){if(n.Utils.skinLoaded||this.skin==null){return;}if(this.skin=="android"){this.contentBorders=[57,10,10,10,70];}else{if(this.skin=="flat"){this.contentBorders=[55,10,10,10,70];}else{if(this.skin=="gnome"){this.contentBorders=[43,10,10,10,60];}else{if(this.skin=="ios"){this.contentBorders=[75,25,10,25,70];}else{if(this.skin=="win10"){this.contentBorders=[55,10,20,10,60];}else{this.contentBorders=[45,10,10,10,60];}}}}}if(this.css){n.Utils.loadedCssTag=n.Utils.addCSS(this.css);}else{if(!(this.useCss&&this.useCss===false)){n.Utils.loadedCssTag=n.Utils.addCSS(n.Utils.getBaseUrl()+this.skin+"/jsdialog.css");}}for(var a1=0;a1<n.instances.length;a1++){var a2=n.instances[a1];a2.setSize(a2.getWidth(),a2.getHeight());}n.Utils.skinLoaded=true;},unloadSkin:function(){if(n.Utils.skinLoaded&&n.Utils.loadedCssTag!=null){n.Utils.loadedCssTag.parentNode.removeChild(n.Utils.loadedCssTag);n.Utils.loadedCssTag=null;n.Utils.skinLoaded=false;}}};n.Button={create:function(a2){if(!a2.type){a2.type="custom";}if(!a2.name){a2.name=null;}if(a2.type=="ok"){a2.name="ok";}else{if(a2.type=="cancel"){a2.name="cancel";}}var a1={dlg:null,elButton:null,type:a2.type,name:a2.name,setTitle:function(a5){var a4=this.elButton;while(a4.firstChild!=null){a4=a4.firstChild;}a4.textContent=a5;},setEnabled:function(a4){if(a4){n.Utils.removeClass(this.elButton,"jsdialog_disabled");}else{n.Utils.addClass(this.elButton,"jsdialog_disabled");}if(this.type=="cancel"){this.dlg.getCloseButton().setEnabled(a4);}}};a1.dlg=a2.dlg;a1.elButton=n.Utils.createElementFromHtml(n.Config.templateButton);n.Utils.addClass(a1.elButton,n.Config.classButton);if(a2.name){n.Utils.addClass(a1.elButton,"jsdialog_btn_name_"+a2.name);}if(a2.type=="ok"){n.Utils.addClass(a1.elButton,n.Config.classButtonOk);}else{if(a2.type=="cancel"){n.Utils.addClass(a1.elButton,n.Config.classButtonCancel);}}var a3="";if(a2.type=="ok"){a3="OK";}else{if(a2.type=="cancel"){a3="Cancel";}}if(a2.title){a3=a2.title;}a1.setTitle(a3);a1.setEnabled(typeof a2.enabled==="undefined"||a2.enabled);a2.elButtonsPanel.appendChild(a1.elButton);a1.elButton.onclick=(function(){var a5=a2.type=="ok"||a2.type=="cancel";var a6=a2.dlg;var a4;if(a2.type=="ok"){a4=a6.onOk||a2.func;}else{if(a2.type=="cancel"){a4=a6.onCancel||a2.func;}else{a4=a2.func;}}a4=a4||(function(){return true;});return function(){var a7=a4(a6);if(a5&&a7){a6.hide();}};})();return a1;}};n.Utils={skinLoaded:false,loadedCssTag:null,escapeHtml:function(a1){return a1.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");},getNextZIndex:function(){var a3=n.Config.zIndexStart-1;for(var a2=0;a2<n.instances.length;a2++){var a1=n.instances[a2];if(a1.visible&&a1.getZIndex()>a3){a3=a1.getZIndex();}}return a3+1;},addCSS:function(a2){var a1=document.getElementsByTagName("link");var a5=false;for(var a3=0;a3<a1.length;a3++){if(a1[a3].href.indexOf(a2)!=-1){a5=true;}}if(!a5){var a4=document.createElement("link");a4.href=a2;a4.type="text/css";a4.rel="stylesheet";document.getElementsByTagName("head")[0].appendChild(a4);return a4;}},getBaseUrl:function(){var a5=/(^|.*[\\\/])jsdialog(\.min)?\.js(?:\?.*|;.*)?$/i;var a4=null;var a1=document.getElementsByTagName("script");for(var a3=0;a3<a1.length;a3++){var a2=a1[a3].src.match(a5);if(a2){a4=a2[1];break;}}if(a4!=null){if(a4.indexOf(":/")==-1&&a4.slice(0,2)!="//"){if(a4.indexOf("/")===0){a4=location.href.match(/^.*?:\/\/[^\/]*/)[0]+a4;}else{a4=location.href.match(/^[^\?]*\/(?:)/)[0]+a4;}}}return a4;},addClass:function(a2,a1){if(n.Utils.hasClass(a2,a1)){return;}a2.className=a2.className.length==0?a1:a2.className+" "+a1;},removeClass:function(a3,a1){var a2=n.Utils.getClasses(a3);while(a2.indexOf(a1)>-1){a2.splice(a2.indexOf(a1),1);}var a4=a2.join(" ").trim();if(a4.length>0){a3.className=a4;}else{if(a3.hasAttribute("class")){a3.removeAttribute("class");}}},getClasses:function(a1){if(typeof(a1.className)==="undefined"||a1.className==null){return[];
}return a1.className.split(/\s+/);},hasClass:function(a4,a1){var a3=n.Utils.getClasses(a4);for(var a2=0;a2<a3.length;a2++){if(a3[a2].toLowerCase()==a1.toLowerCase()){return true;}}return false;},getStyles:function(a3){if(typeof(a3.getAttribute("style"))==="undefined"||a3.getAttribute("style")==null||a3.getAttribute("style").trim().length==0){return{};}var a5={};var a4=a3.getAttribute("style").split(/;/);for(var a2=0;a2<a4.length;a2++){var a6=a4[a2].trim();var a1=a6.indexOf(":");if(a1>-1){a5[a6.substr(0,a1).trim()]=a6.substr(a1+1);}else{a5[a6]="";}}return a5;},getStyle:function(a3,a2,a6){var a4=n.Utils.getStyles(a3);for(var a1 in a4){var a5=a4[a1].trim();if(a1==a2){if(!(a6&&a6===true)){if(a5.length>=2&&a5.substring(a5.length-2)=="px"){a5=a5.substring(0,a5.length-2);}}if(/^\+?(0|[1-9]\d*)$/.test(a5)){a5=parseInt(a5);}return a5;}}return null;},setStyle:function(a3,a2,a1){var a4=n.Utils.getStyles(a3);a4[a2]=a1;n.Utils.setStyles(a3,a4);},setStyles:function(a2,a4){var a3=[];for(var a1 in a4){a3.push(a1+":"+a4[a1]);}if(a3.length>0){a2.setAttribute("style",a3.join(";"));}else{if(a2.hasAttribute("style")){a2.removeAttribute("style");}}},createElementFromHtml:function(a1){var a2=document.createElement("div");a2.innerHTML=a1;return a2.childNodes[0];}};c();var ar=-1;var p={};az("jsplus_backup","en",au);function aU(a2){var a1=C(a2);g(a1,"backupNow",ap);g(a1,"saveBackupAndCallListeners",E);g(a1,"saveBackup",aL);g(a1,"restore",O);g(a1,"restoreAndCallListeners",am);g(a1,"getAll",aI);g(a1,"clear",ah);g(a1,"get",aq);g(a1,"delete",aD);g(a1,"getInstanceId",m);g(a1,"getContent",aF);g(a1,"isContentEmpty",v);g(a1,"getWordsCount",h);g(a1,"getSymbolsCount",P);g(a1,"getImagesCount",aB);g(a1,"getLastBackedUpContent",aZ);g(a1,"areContentsEqual",ab);g(a1,"formatCount",k);g(a1,"formatSize",M);g(a1,"formatDate",t);H(a1,"onBeforeBackupSave",ac);H(a1,"onAfterBackupSave",U);H(a1,"onBeforeBackupLoad",U);H(a1,"onAfterBackupLoad",U);}function k(a1){return N(a1,false,"");}function M(a1){return N(a1,true,"&nbsp;");}function aF(){return V(this.editor);}function v(a1){txt=a1.replace(new RegExp("</?(br|span|p|div)s*/?>","g"),"");txt=txt.replace(new RegExp("s","g"),"");return txt=="";}var S={};function aZ(){if(typeof S[G(this.editor)]=="undefined"){var a2=this.getAll();if(a2.length==0){return null;}var a4=-1;var a1=-1;var a5=-1;for(var a3 in a2){a5++;if(a4==-1||parseInt(a3)>parseInt(a1)){a4=a5;a1=a3;}}S[G(this.editor)]=a1==-1?"":a2[a1].html;}return S[G(this.editor)];}function ab(a2,a1){return a2===a1;}function ap(){var a1=this.getContent();if(ag(this.editor,"save_empty")===false){if(this.isContentEmpty(a1)){return null;}}if(this.areContentsEqual(this.getLastBackedUpContent(),a1)){return null;}var a2=Date.now();this.saveBackupAndCallListeners(a2,a1);return a2;}function E(a2,a1){if(this.onBeforeBackupSave.call(this.getInstanceId(),a2,a1)==false){return null;}this.saveBackup(a2,a1);this.onAfterBackupSave.call(this.getInstanceId(),a2,a1);}function aL(a3,a2){Y(this.editor);var a1={html:a2,symbols:this.getSymbolsCount(a2),words:this.getWordsCount(a2),images:this.getImagesCount(a2)};backups=this.getAll();backups[a3]=a1;S[G(this.editor)]=a2;K(this.editor,backups);}function ah(){K(this.editor,{});}function am(a1){this.onBeforeBackupLoad.call(this.getInstanceId(),a1);if(ag(this.editor,"save_before_load")){this.backupNow();}this.restore(a1);this.onAfterBackupLoad.call(this.getInstanceId(),a1);}function O(a2){var a1=this.get(a2).html;Z(this.editor,a1);}function aD(a2){var a1=this.getAll();if(a2 in a1){delete a1[a2];}K(this.editor,a1);}function aI(){Y(this.editor);var a1=localStorage.getItem(this.getInstanceId());if(typeof(a1)==="undefined"||a1==null){return null;}var a3=JSON.parse(a1);var a2=this.getContent();a3[999999999999]={html:a2,symbols:ai(this.editor).getSymbolsCount(a2),words:ai(this.editor).getWordsCount(a2),images:ai(this.editor).getImagesCount(a2)};return a3;}function aq(a1){return this.getAll()[a1];}var d={};function m(){if(typeof d[G(this.editor)]=="undefined"){var a1=new URI();a1.normalize();d[G(this.editor)]=a1.href();}return d[G(this.editor)]+" "+G(this.editor);}function t(a1){var a2=new Date(a1);return a2.format(ag(this.editor,"date_format"));}function h(a1){return X(a1)[0];}function P(a1){return X(a1)[1];}function aB(a1){return(a1.match(/<img\s/g)||[]).length;}function K(a2,a3){if(typeof a3[999999999999]!=="undefined"){delete a3[999999999999];}if(a3==null||a3.length==0){localStorage.removeItem(ai(a2).getInstanceId());}else{var a1=[];for(var a4 in a3){a1.push(a4);}a1.sort().reverse();while(a1.length>ag(a2,"snapshots_limit")){delete a3[a1.pop()];}while(true){try{localStorage.setItem(ai(a2).getInstanceId(),JSON.stringify(a3));return;}catch(a5){console.log("Local storage limit reached, trying to remove one element");if(a1.length==0){console.log("Backup is too big for local storage");return;}delete a3[a1.pop()];}}}}function Y(a1){if(localStorage.getItem(ai(a1).getInstanceId())==undefined){localStorage.setItem(ai(a1).getInstanceId(),"{}");}}function X(a6){var a5=document.createElement("DIV");
a5.innerHTML=a6;var a1=a5.textContent||a5.innerText||"";var a7=/\s+/gi;var a2=a1.trim().replace(a7," ").split(" ");var a8=0;var a3=0;for(var a4=a2.length-1;a4>=0;a4--){if(a2[a4].trim().length>0){a8++;a3+=a2[a4].trim().length;}}return[a8,a3];}function aw(a7){if(aG()=="ckeditor"){if(ag(a7,"add_text_to_load_button")){var a5=a7.container.$.getElementsByClassName("cke_button__jsplus_backup_load_label");for(var a4=0;a4<a5.length;a4++){a5[a4].setAttribute("style","display: block !important");}}if(!i(a7)&&ag(a7,"move_to_footer")){var a5=[];var a8=a7.container.$.getElementsByClassName("cke_button__jsplus_backup_save");if(a8!=null&&a8.length>0){a5.push(a8[0]);}a8=a7.container.$.getElementsByClassName("cke_button__jsplus_backup_load");if(a8!=null&&a8.length>0){a5.push(a8[0]);}if(a5.length>0){var a2=a5[0].parentElement;var a1=document.getElementById(a7.id+"_bottom");var a3=document.createElement("span");if(ag(a7,"add_background_in_footer")){a3.className="cke_toolgroup";}a3.style["float"]="right";a3.style.cssFloat="right";a3.style.margin="-3px 10px 0 0";a1.appendChild(a3);for(var a4=0;a4<a5.length;a4++){var a6=a5[a4];a2.removeChild(a6);a3.appendChild(a6);}if(a2.childNodes.length==0){a2.parentElement.removeChild(a2);}}}}if(ag(a7,"interval")>0){setInterval(function(){if(!aA){ai(a7).backupNow();}},ag(a7,"interval"));}}var B=function(bb,be,bc){var ba=ai(bb).get(bc);if(ba==null){return;}var a2=null;var a4=be.elContent.getElementsByClassName("jsplus_backup-load-backup");for(var a5=0;a5<a4.length;a5++){if(a4[a5].getAttribute("data-timestamp")==bc){a2=a4[a5];aR(a4[a5],"jsplus_backup-load-backup-selected");}else{aV(a4[a5],"jsplus_backup-load-backup-selected");}}var a7=document.getElementById("jsplus_backup-load-preview-frame-"+G(bb));var bd=document.getElementById("jsplus_backup-load-preview-"+G(bb));if(a7!=null){bd.removeChild(a7);}a7=document.createElement("iframe");a7.id="jsplus_backup-load-preview-frame-"+G(bb);bd.innerHTML="";bd.appendChild(a7);if(aG()=="ckeditor"){var a9=b(bb).body.classList;}else{}var a8="";var a3=a7.contentWindow.document;var bf=b(bb).getElementsByTagName("link");for(var a5=0;a5<bf.length;a5++){a8+='<link rel="stylesheet" type="text/css" href="'+bf[a5].href+'"/>';}var bg=b(bb).getElementsByTagName("style");for(var a5=0;a5<bg.length;a5++){a8+='<style type="text/css">'+bg[a5].innerHTML+"</style>";}var a6="<html "+(ag(bb,"use_editor_width_for_preview")?'style="overflow:scroll"':'style="overflow-y:scroll;overflow-x:hidden"')+"><head>"+a8+'</head><body><div style="word-wrap: break-word;'+(ag(bb,"use_editor_width_for_preview")?"width:"+(b(bb).getElementsByTagName("html")[0].offsetWidth+20)+"px;padding-right:20px":"")+'"><div class="'+a9+'">'+ba.html+"</div></div></body></html>";a7.style.width="100%";var a1=typeof InstallTrigger!=="undefined";if(a1){a7.style.display="none";}a7.contentDocument.write(a6);a7.contentDocument.close();if(a1){setTimeout(function(){a7.style.display="block";},50);}ar=bc;};var aA=false;function au(a2){aU(a2);var a1=-1;p[G(a2)]=n.create({title:x(a2,"load"),width:ag(a2,"dialog_width"),height:ag(a2,"dialog_height"),contents:'<style type="text/css">'+".jsdialog_plugin_jsplus_backup .jsdialog_content { overflow: hidden; }"+".jsplus_backup-load-backups-wrap { overflow:scroll;overflow-y:auto;overflow-x: hidden; width: 100%; height: 100%; border-right: 1px solid #CCC; }"+".jsplus_backup-load-backups-wrap::-webkit-scrollbar-track, .jsplus_backup-load-preview iframe::-webkit-scrollbar-track { "+"background-color: white;"+"}"+".jsplus_backup-load-backups-wrap::-webkit-scrollbar {"+"width: 5px;"+"height: 5px;"+"background-color: white;"+"}"+".jsplus_backup-load-preview iframe::-webkit-scrollbar {"+"width: 7px;"+"height: 7px;"+"background-color: white;"+"}"+".jsplus_backup-load-backups-wrap::-webkit-scrollbar-thumb, .jsplus_backup-load-preview iframe::-webkit-scrollbar-thumb {"+"background-color: #6D6D6D;"+"}"+".jsplus_backup-load-backup { cursor: pointer; text-align: center; color: #33333F; border-bottom: 1px #CCC solid; padding: 8px 0 6px 0; -moz-user-select: -moz-none;-khtml-user-select: none;-webkit-user-select: none;-ms-user-select: none;user-select: none; }"+""+".jsplus_backup-load-backup:last-child { border-bottom: none; }"+".jsplus_backup-load-backup-timestamp { cursor: pointer; margin-left:50px; }"+".jsplus_backup-load-backup-data-timestamp { cursor: pointer; font-size:14px; padding-bottom: 5px; text-align: center; }"+".jsplus_backup-load-backup-data-counts { cursor: pointer; font-size:12px; white-space: nowrap; text-align: center; }"+".jsplus_backup-load-backup-data-count { cursor: pointer; display:inline-block; padding: 3px; text-align: left; width: 45px; white-space: nowrap; }"+".jsplus_backup-load-backup-data-count img { padding-right: 5px; -webkit-filter: saturate(0) brightness(1.2); filter: saturate(0) brightness(1.2); }"+".jsplus_backup-load-preview { width: 490px; height: 100%; overflow: hidden; }"+".jsplus_backup-load-preview iframe { border: none; height: 100%; overflow-x: hidden; overflow-y: auto; }"+".jsplus_backup-load-backup:hover, .jsplus_backup-load-backup-selected { background-color: #0090FF; } "+".jsplus_backup-load-backup:hover, .jsplus_backup-load-backup-selected, .jsplus_backup-load-backup:hover *, .jsplus_backup-load-backup-selected * { color: white; } "+".jsplus_backup-load-backup:hover img, .jsplus_backup-load-backup-selected img { -webkit-filter: brightness(0) invert(1); filter: brightness(0) invert(1); } "+"#jsplus_backup-load-wrap-"+G(a2)+" { position: relative; width: 100%; height: 100%; }"+"#jsplus_backup-load-backups-"+G(a2)+" { position: absolute; top: 0; left: 0; height: 100%; width: 260px; }"+"#jsplus_backup-load-preview-"+G(a2)+" { position: absolute; top: 0; left: 261px; height: 100%; width: "+(ag(a2,"dialog_width")-260)+"px}"+"</style>"+'<div id="jsplus_backup-load-wrap-'+G(a2)+'">'+'<div id="jsplus_backup-load-backups-'+G(a2)+'"></div>'+'<div id="jsplus_backup-load-preview-'+G(a2)+'" class="jsplus_backup-load-preview"></div>'+"</div>",buttons:[{type:"ok"},{type:"cancel"},{type:"custom",title:x(a2,"remove_all"),func:function(a3){if(confirm(x(a2,"confirm_remove_all"))){ai(a2).clear();
a3.hide();aA=false;}}}],onShow:function(a9){aA=true;a1=-1;ar=-1;var bd=document.getElementById("jsplus_backup-load-backups-"+G(a2));var ba=document.getElementById("jsplus_backup-load-preview-"+G(a2));var bc=ai(a2).getAll();var be=[];for(var a8 in bc){be.push(a8);}be.sort();var a7="";for(var a4=0;a4<be.length;a4++){var a8=be[a4];var a6=bc[a8];var bb=a8=="999999999999"?x(a2,"current"):ai(a2).formatDate(parseInt(a8));var a5='<div class="jsplus_backup-load-backup" data-timestamp="'+a8+'">'+'<div class="jsplus_backup-load-backup-data">'+'<div class="jsplus_backup-load-backup-data-timestamp">'+bb+"</div>"+'<div class="jsplus_backup-load-backup-data-counts">'+'<div class="jsplus_backup-load-backup-data-count jsplus_backup-load-backup-data-count-symbols" title="'+x(a2,"symbols_count")+'"><img src="'+aT()+'img/symbols.png" alt="'+x(a2,"symbols_count")+'"/>'+ai(a2).formatCount(a6.symbols)+"</div>"+'<div class="jsplus_backup-load-backup-data-count jsplus_backup-load-backup-data-count-words"   title="'+x(a2,"words_count")+'"><img src="'+aT()+'img/words.png" alt="'+x(a2,"words_count")+'"/>'+ai(a2).formatCount(a6.words)+"</div>"+'<div class="jsplus_backup-load-backup-data-count jsplus_backup-load-backup-data-count-images"   title="'+x(a2,"images_count")+'"><img src="'+aT()+'img/images.png" alt="'+x(a2,"images_count")+'"/>'+ai(a2).formatCount(a6.images?a6.images:0)+"</div>"+'<div class="jsplus_backup-load-backup-data-count jsplus_backup-load-backup-data-count-size"    title="'+x(a2,"html_length")+'"><img src="'+aT()+'img/size.png" alt="'+x(a2,"html_length")+'"/>'+ai(a2).formatSize(a6.html.length)+"</div>"+"</div>"+"</div>"+"</div>";a7=a5+a7;}a7='<div class="jsplus_backup-load-backups-wrap">'+a7+"</div>";bd.innerHTML=a7;var a3=a9.elContent.getElementsByClassName("jsplus_backup-load-backup");for(var a4=0;a4<a3.length;a4++){a3[a4].onclick=(function(){var bf=a2;var bg=a9;return function(){B(bf,bg,this.getAttribute("data-timestamp"));};})();}B(a2,a9,be[be.length-1]);},onOk:function(){if(ar==999999999999){return true;}ai(a2).restoreAndCallListeners(ar);return true;},onHide:function(){aA=false;}});z(a2,"jsplus_backup_load","jsplus_backup_load","load",(function(){var a3=a2;return function(){p[G(a3)].show();};})(),"file");z(a2,"jsplus_backup_save","jsplus_backup_save","save",(function(){var a3=a2;return function(){ai(a2).backupNow();};})(),"file");I(a2,"instanceReady",aw);}w("save_empty",false);w("interval",30000);w("snapshots_limit",20);w("save_before_load",true);w("date_format","[{mmm d, yyyy}, HH:MM]");w("use_editor_width_for_preview",true);w("dialog_width",750);w("dialog_height",550);w("move_to_footer",true);w("add_background_in_footer",true);w("add_text_to_load_button",true);})();