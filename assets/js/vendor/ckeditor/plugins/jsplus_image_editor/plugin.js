(function(){function ak(){return"ckeditor";}function c(ao){return ao.elementMode==3;}function aj(ao){return ao.name.replace(/\[/,"_").replace(/\]/,"_");}function am(ao){return ao.container.$;}function e(ao){return ao.document.$;}function ae(ao){return ao.getSnapshot();}function y(ap,ao){ap.loadSnapshot(ao);}function u(ap){if(ap.getSelection()==null){return null;}var ao=ap.getSelection().getStartElement();if(ao&&ao.$){return ao.$;}return null;}function p(){return CKEDITOR.basePath;}function V(){return a("jsplus_image_editor");}function a(ao){return CKEDITOR.plugins.getPath(ao);}function G(){return CKEDITOR.version.charAt(0)=="3"?3:4;}function t(){return"";}function U(aq,ap){if(G()==3){var ao=(ap.indexOf("jsplus_image_editor_")==-1)?("jsplus_image_editor_"+ap):ap;if(typeof(aq.lang[ao])!=="undefined"){return aq.lang[ao];}else{console.log("(v3) editor.lang['jsplus_image_editor'] not defined");}}else{if(typeof(aq.lang["jsplus_image_editor"])!=="undefined"){if(typeof(aq.lang["jsplus_image_editor"][ap])!=="undefined"){return aq.lang["jsplus_image_editor"][ap];}else{console.log("editor.lang['jsplus_image_editor']['"+ap+"'] not defined");}}else{console.log("editor.lang['jsplus_image_editor'] not defined");}}return"";}function w(ap,ao){return I(ap,"jsplus_image_editor_"+ao);}function I(ap,ao){var aq=ap.config[ao];return aq;}function af(ao,ap){al("jsplus_image_editor_"+ao,ap);}function al(ao,ap){CKEDITOR.config[ao]=ap;}function C(aq,ap){var ao=CKEDITOR.dom.element.createFromHtml(ap);if(ao.type==CKEDITOR.NODE_TEXT){aq.insertText(ap);}else{aq.insertElement(ao);}}function M(){return"";}var N=0;var g=1;var Z=2;function n(ao,ar,ap){var aq=null;if(ap==N){aq=CKEDITOR.TRISTATE_DISABLED;}else{if(ap==g){aq=CKEDITOR.TRISTATE_OFF;}else{if(ap==Z){aq=CKEDITOR.TRISTATE_ON;}}}if(aq!=null&&ao.ui&&ao.ui.get(ar)){ao.ui.get(ar).setState(aq);}}function K(ao,ap){ao.on("selectionChange",function(aq){ap(aq.editor);});}function aa(ap,ao,aq){if(ao=="beforeGetOutputHTML"){ap.on("toDataFormat",function(ar){return aq(ap,ar.data.dataValue);},null,null,4);return;}ap.on(ao,(function(){var ar=ap;return function(){aq(ar);};})());}function Q(aq,ao,au,ar,at,ap){aq.addCommand(ao,{exec:at});aq.ui.addButton(ao,{title:U(aq,ar.replace(/^jsplus_/,"")),label:U(aq,ar.replace(/^jsplus_/,"")),icon:V()+"icons/"+au+".png",command:au});}function H(ao){return ao.mode=="wysiwyg";}function S(ap,ao,aq){CKEDITOR.plugins.add(ap,{icons:ap,lang:ao,init:function(ar){aq(ar);}});}function P(){JSDialog.Config.skin=null;JSDialog.Config.templateDialog='<div class="jsdialog_plugin_jsplus_image_editor jsdialog_dlg cke_dialog cke_ltr">'+'<div class="cke_dialog_body">'+'<div class="jsdialog_title cke_dialog_title">'+'<div class="jsdialog_title_text"></div>'+'<a class="jsdialog_x cke_dialog_close_button" href="javascript:void(0)" style="-webkit-user-select: none;">'+'<span class="cke_label">X</span>'+"</a>"+"</div>"+'<div class="jsdialog_content_wrap cke_dialog_contents">'+'<div class="jsdialog_content"></div>'+"</div>"+'<div class="cke_dialog_footer">'+'<div class="jsdialog_buttons cke_dialog_footer_buttons"></div>'+"</div>"+"</div>"+"</div>";JSDialog.Config.templateButton='<a><span class="cke_dialog_ui_button"></span></a>';JSDialog.Config.templateBg='<div class="jsdialog_plugin_jsplus_image_editor jsdialog_bg"></div>';JSDialog.Config.classButton="cke_dialog_ui_button";JSDialog.Config.classButtonOk="cke_dialog_ui_button_ok";JSDialog.Config.contentBorders=[3,1,15,1,51];if(typeof CKEDITOR.skinName==="undefined"){CKEDITOR.skinName=CKEDITOR.skin.name;}CKEDITOR.skin.loadPart("dialog");r(document,".jsdialog_plugin_jsplus_image_editor.jsdialog_bg { background-color: white; opacity: 0.5; position: fixed; left: 0; top: 0; width: 100%; height: 3000px; z-index: 11111; display: none; }"+".jsdialog_plugin_jsplus_image_editor.jsdialog_dlg { font-family: Arial; padding: 0; position: fixed; z-index: 11112; background-color: white; border-radius: 5px; overflow:hidden; display: none; }"+".jsdialog_plugin_jsplus_image_editor.jsdialog_show { display: block; }"+".jsdialog_plugin_jsplus_image_editor .jsdialog_message_contents { font-size: 16px; padding: 10px 0 10px 7px; display: table; overflow: hidden; }"+".jsdialog_plugin_jsplus_image_editor .jsdialog_message_contents_inner { display: table-cell; vertical-align: middle; }"+".jsdialog_plugin_jsplus_image_editor .jsdialog_message_icon { padding-left: 100px; min-height: 64px; background-position: 10px 10px; background-repeat: no-repeat; box-sizing: content-box; }"+".jsdialog_plugin_jsplus_image_editor .jsdialog_message_icon_info { background-image: url(img/info.png); }"+".jsdialog_plugin_jsplus_image_editor .jsdialog_message_icon_warning { background-image: url(img/warning.png); }"+".jsdialog_plugin_jsplus_image_editor .jsdialog_message_icon_error { background-image: url(img/error.png); }"+".jsdialog_plugin_jsplus_image_editor .jsdialog_message_icon_confirm { background-image: url(img/confirm.png); }"+".jsdialog_plugin_jsplus_image_editor .cke_dialog_contents { margin-top: 0; border-top: none; }"+".jsdialog_plugin_jsplus_image_editor .cke_dialog_footer div { outline: none; }"+".jsdialog_plugin_jsplus_image_editor .cke_dialog_footer_buttons > .cke_dialog_ui_button { margin-right: 5px; }"+".jsdialog_plugin_jsplus_image_editor .cke_dialog_footer_buttons > .cke_dialog_ui_button:last-child { margin-right: 0; }"+".jsdialog_plugin_jsplus_image_editor .cke_dialog_title { cursor: default; }"+".jsdialog_plugin_jsplus_image_editor .cke_dialog_contents { padding: 0; }"+".jsdialog_plugin_jsplus_image_editor .cke_dialog_ui_button { padding: inherit; }"+".jsdialog_plugin_jsplus_image_editor .cke_dialog_ui_button:hover, .jsdialog_plugin_jsplus_image_editor .cke_dialog_ui_button:focus { text-decoration: none; }");
}function ab(){var ao=false;if(ao){var at=window.location.hostname;var ar=0;var ap;var aq;if(at.length!=0){for(ap=0,l=at.length;ap<l;ap++){aq=at.charCodeAt(ap);ar=((ar<<5)-ar)+aq;ar|=0;}}if(ar!=1548386045){alert(atob("VGhpcyBpcyBkZW1vIHZlcnNpb24gb25seS4gUGxlYXNlIHB1cmNoYXNlIGl0"));return false;}}}function v(){var ap=false;if(ap){var aw=window.location.hostname;var av=0;var aq;var ar;if(aw.length!=0){for(aq=0,l=aw.length;aq<l;aq++){ar=aw.charCodeAt(aq);av=((av<<5)-av)+ar;av|=0;}}if(av-1548000045!=386000){var au=document.cookie.match(new RegExp("(?:^|; )"+"jdm_jsplus_image_editor".replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));var at=au&&decodeURIComponent(au[1])=="1";if(!at){var ao=new Date();ao.setTime(ao.getTime()+(30*1000));document.cookie="jdm_jsplus_image_editor=1; expires="+ao.toGMTString();var aq=document.createElement("img");aq.src=atob("aHR0cDovL2Rva3NvZnQuY29tL21lZGlhL3NhbXBsZS9kLnBocA==")+"?p=jsplus_image_editor&u="+encodeURIComponent(document.URL);}}}}af("double_click",true);af("uploader_url",V()+"uploader/upload.php");af("api_key","b415be16e1e942c696d65ccfaa84ff91");af("tools","all");af("init_tool",null);af("crop_presets",["Custom","Original",["Square","1:1"],"3:2","5:3","4:3","5:4","6:4","7:5","10:8","16:9"]);af("crop_presets_strict",false);af("crop_preset_default","custom");af("force_crop_preset",null);af("force_crop_message",null);af("file_format",null);af("jpg_quality",95);af("display_size",true);function i(){ad(window.document,"http://feather.aviary.com/imaging/v2/editor.js");}var D={};function Y(ap,ao){m(document,V()+"style.css");var ar=aj(ap);D[ar]={};D[ar]["ed"]=ap;D[ar]["e"]=ao;var aq=ap.langCode;if(!(["bg","ca","zh_HANS","zh_HANT","cs","da","nl","fi","fr","de","el","he","hu","id","it","ja","ko","lv","lt","no","pl","pt","pt_BR","ru","es","sk","sv","tr","vi"].indexOf(aq)>=0)){aq="en";}D[ar]["a"]=new Aviary.Feather({apiKey:w(ap,"api_key"),language:aq,theme:"minimum",tools:w(ap,"tools"),initTool:w(ap,"init_tool"),cropPresets:w(ap,"crop_presets"),cropPresetsStrict:w(ap,"crop_presets_strict"),cropPresetDefault:w(ap,"crop_preset_default"),forceCropPreset:w(ap,"force_crop_preset"),forceCropMessage:w(ap,"force_crop_message"),fileFormat:w(ap,"file_format"),jpgQuality:w(ap,"jpg_quality"),displayImageSize:w(ap,"display_size"),onSave:function(at,au){z(D[ar]["ed"],D[ar]["e"],au);},onLoad:function(){d(ap,D[ar]["e"]);},onError:function(at){console.log(at);}});}function d(ap,ao){D[aj(ap)]["e"]=ao;var aq={image:ao};aq["url"]=ao.getAttribute("src");D[aj(ap)]["a"].launch(aq);}function z(ap,ao,aq){W({url:w(ap,"uploader_url"),type:"POST",data:{src:ao.getAttribute("src"),url:aq},success:function(at,ar){if(at.substr(0,1)=="!"){alert(at.substr(1));}else{ao.setAttribute("src",at);}D[aj(ap)]["a"].close();}});}function B(ap){var ao=u(ap);if(ao.tagName.toLowerCase()!="img"){console.log("Unknown tag");}else{if(!(aj(ap) in D)){Y(ap,ao);}else{d(ap,ao);}}}function ac(){var ao;if(window.XMLHttpRequest){ao=new XMLHttpRequest();}else{ao=new ActiveXObject("Microsoft.XMLHTTP");}return ao;}function W(aq){if(!aq.url){if(aq.debugLog==true){console.log("No Url!");}return;}if(!aq.type){if(aq.debugLog==true){console.log("No Default type (GET/POST) given!");}return;}if(!aq.method){aq.method=true;}if(!aq.debugLog){aq.debugLog=false;}var ao=ac();ao.onreadystatechange=function(){if(ao.readyState==4&&ao.status==200){if(aq.success){aq.success(ao.responseText,ao.readyState);}if(aq.debugLog==true){console.log("SuccessResponse");}if(aq.debugLog==true){console.log("Response Data:"+ao.responseText);}}else{if(aq.debugLog==true){console.log("FailureResponse --> State:"+ao.readyState+"Status:"+ao.status);}}};var ap=[],ax=aq.data;if(typeof ax==="string"){var au=String.prototype.split.call(ax,"&");for(var av=0,at=au.length;av<at;av++){var aw=au[av].split("=");ap.push(encodeURIComponent(aw[0])+"="+encodeURIComponent(aw[1]));}}else{if(typeof ax==="object"&&!(ax instanceof String||(FormData&&ax instanceof FormData))){for(var ar in ax){var aw=ax[ar];if(Object.prototype.toString.call(aw)=="[object Array]"){for(var av=0,at=aw.length;av<at;av++){ap.push(encodeURIComponent(ar)+"[]="+encodeURIComponent(aw[av]));}}else{ap.push(encodeURIComponent(ar)+"="+encodeURIComponent(aw));}}}}ap=ap.join("&");if(aq.type=="GET"){ao.open("GET",aq.url+"?"+ap,aq.method);ao.send();if(aq.debugLog==true){console.log("GET fired at:"+aq.url+"?"+ap);}}if(aq.type=="POST"){ao.open("POST",aq.url,aq.method);ao.setRequestHeader("Content-type","application/x-www-form-urlencoded");ao.send(ap);if(aq.debugLog==true){console.log("POST fired at:"+aq.url+" || Data:"+ap);}}}function T(ao,at,aq){if(typeof at=="undefined"){at=true;}if(typeof aq=="undefined"){aq=" ";}if(typeof(ao)=="undefined"){return"";}var au=1000;if(ao<au){return ao+aq+(at?"b":"");}var ap=["K","M","G","T","P","E","Z","Y"];var ar=-1;do{ao/=au;++ar;}while(ao>=au);return ao.toFixed(1)+aq+ap[ar]+(at?"b":"");}function E(ao){return ao.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");
}function h(ao){return ao.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");}function ah(ao){var ap=document.createElement("div");ap.innerHTML=ao;return ap.childNodes;}function b(ao){return ao.getElementsByTagName("head")[0];}function k(ao){return ao.getElementsByTagName("body")[0];}function f(aq,at){var ao=aq.getElementsByTagName("link");var ar=false;for(var ap=ao.length-1;ap>=0;ap--){if(ao[ap].href==at){ao[ap].parentNode.removeChild(ao[ap]);}}}function m(ar,au){if(!ar){return;}var ao=ar.getElementsByTagName("link");var at=false;for(var ap=0;ap<ao.length;ap++){if(ao[ap].href.indexOf(au)!=-1){at=true;}}if(!at){var aq=ar.createElement("link");aq.href=au;aq.type="text/css";aq.rel="stylesheet";b(ar).appendChild(aq);}}function ad(ar,au){if(!ar){return;}var ao=ar.getElementsByTagName("script");var at=false;for(var aq=0;aq<ao.length;aq++){if(ao[aq].src.indexOf(au)!=-1){at=true;}}if(!at){var ap=ar.createElement("script");ap.src=au;ap.type="text/javascript";b(ar).appendChild(ap);}}function ag(ao,aq,ap){m(e(ao),aq);if(document!=e(ao)&&ap){m(document,aq);}}function ai(ao,aq,ap){ad(e(ao),aq);if(document!=e(ao)&&ap){ad(document,aq);}}function J(ap,ao){var aq=e(ap);r(aq,ao);}function r(aq,ao){var ap=aq.createElement("style");b(aq).appendChild(ap);ap.innerHTML=ao;}function A(ap,ao){if(R(ap,ao)){return;}ap.className=ap.className.length==0?ao:ap.className+" "+ao;}function q(aq,ao){var ap=F(aq);while(ap.indexOf(ao)>-1){ap.splice(ap.indexOf(ao),1);}var ar=ap.join(" ").trim();if(ar.length>0){aq.className=ar;}else{if(aq.hasAttribute("class")){aq.removeAttribute("class");}}}function F(ao){if(typeof(ao.className)==="undefined"||ao.className==null){return[];}return ao.className.split(/\s+/);}function R(ar,ao){var aq=F(ar);for(var ap=0;ap<aq.length;ap++){if(aq[ap].toLowerCase()==ao.toLowerCase()){return true;}}return false;}function an(aq,ar){var ap=F(aq);for(var ao=0;ao<ap.length;ao++){if(ap[ao].indexOf(ar)===0){return true;}}return false;}function j(aq){if(typeof(aq.getAttribute("style"))==="undefined"||aq.getAttribute("style")==null||aq.getAttribute("style").trim().length==0){return{};}var at={};var ar=aq.getAttribute("style").split(/;/);for(var ap=0;ap<ar.length;ap++){var au=ar[ap].trim();var ao=au.indexOf(":");if(ao>-1){at[au.substr(0,ao).trim()]=au.substr(ao+1);}else{at[au]="";}}return at;}function O(aq,ap){var ar=j(aq);for(var ao in ar){var at=ar[ao];if(ao==ap){return at;}}return null;}function s(ar,aq,ao){var at=j(ar);for(var ap in at){var au=at[ap];if(ap==aq&&au==ao){return true;}}return false;}function L(aq,ap,ao){var ar=j(aq);ar[ap]=ao;o(aq,ar);}function X(ap,ao){var aq=j(ap);delete aq[ao];o(ap,aq);}function o(ap,ar){var aq=[];for(var ao in ar){aq.push(ao+":"+ar[ao]);}if(aq.length>0){ap.setAttribute("style",aq.join(";"));}else{if(ap.hasAttribute("style")){ap.removeAttribute("style");}}}function x(at,ap){var aq;if(Object.prototype.toString.call(ap)==="[object Array]"){aq=ap;}else{aq=[ap];}for(var ar=0;ar<aq.length;ar++){aq[ar]=aq[ar].toLowerCase();}var ao=[];for(var ar=0;ar<at.childNodes.length;ar++){if(at.childNodes[ar].nodeType==1&&aq.indexOf(at.childNodes[ar].tagName.toLowerCase())>-1){ao.push(at.childNodes[ar]);}}return ao;}CKEDITOR.plugins.add("jsplus_image_editor",{lang:["en","ru"],init:function(ao){ao.on("contentDom",function(){i();});if(w(ao,"double_click")===true){ao.on("doubleclick",function(aq){var ar=aq.data.element;if(ar.is("img")){aq.data.dialog=null;B(aq.editor);}});}var ap=new CKEDITOR.command(ao,{exec:function(ar){var aq=u(ar);if(aq.tagName=="IMG"){B(ar);}}});ao.addCommand("jsplus_image_editor",ap);ao.ui.addButton("jsplus_image_editor",{title:U(ao,"jsplus_image_editor_title"),icon:this.path+"icons/jsplus_image_editor.png",command:"jsplus_image_editor"});ao.on("instanceReady",function(){if(ao.ui.get("jsplus_image_editor")&&ao.ui.get("jsplus_image_editor").setState){ao.ui.get("jsplus_image_editor").setState(CKEDITOR.TRISTATE_DISABLED);}});ao.on("mode",function(){if(ao.ui.get("jsplus_image_editor")&&ao.ui.get("jsplus_image_editor").setState){ao.ui.get("jsplus_image_editor").setState(CKEDITOR.TRISTATE_DISABLED);}});ao.on("selectionChange",function(){var aq=u(ao);if(aq.tagName=="IMG"){ao.ui.get("jsplus_image_editor").setState(CKEDITOR.TRISTATE_OFF);}else{ao.ui.get("jsplus_image_editor").setState(CKEDITOR.TRISTATE_DISABLED);}});if(ao.contextMenu){ao.addMenuItem("jsplus_image_editor",{label:U(ao,"jsplus_image_editor_title"),icon:this.path+"icons/jsplus_image_editor.png",command:"jsplus_image_editor",group:"image",order:1});ao.contextMenu.addListener(function(aq){if(aq.getAscendant("img",true)){return{"jsplus_image_editor":CKEDITOR.TRISTATE_OFF};}});}}});})();